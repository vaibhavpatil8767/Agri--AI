<!DOCTYPE html>
<html lang="mr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>рдХрд┐рд╕рд╛рди рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░ - рд╕рдВрдкреВрд░реНрдг рдХреГрд╖реА рдорд╛рд╣рд┐рддреА</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #f0f8f5, #e6f3e6);
      margin: 0;
      padding: 15px;
      line-height: 1.6;
      min-height: 100vh;
    }
    
    .header {
      text-align: center;
      background: linear-gradient(135deg, #006400, #228b22);
      color: white;
      padding: 20px;
      border-radius: 15px;
      margin-bottom: 20px;
      box-shadow: 0 4px 15px rgba(0,100,0,0.3);
      position: relative;
    }
    
    .krushisanvad-logo {
      position: absolute;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      background: white;
      padding: 10px;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5em;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    
    h1 {
      font-size: 1.4em;
      margin-bottom: 5px;
    }
    
    .developer {
      font-size: 0.9em;
      opacity: 0.9;
      margin-top: 5px;
    }
    
    .container {
      max-width: 100%;
      margin: auto;
    }
    
    .app-content {
      display: none;
    }
    
    .app-content.active {
      display: block;
    }
    
    .section {
      margin-bottom: 25px;
      padding: 15px;
      border: 1px solid #c8e6c9;
      border-radius: 12px;
      background: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      animation: fadeIn 0.5s ease-in;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .section h2 {
      color: #006400;
      margin-bottom: 15px;
      font-size: 1.2em;
      text-align: center;
      border-bottom: 2px solid #e8f5e8;
      padding-bottom: 8px;
    }
    
    /* ЁЯФе CHATBOT STYLES - ChatGPT Inspired */
    .chatbot-section {
      background: linear-gradient(135deg, #1a1a2e, #16213e) !important;
      border: none !important;
      color: white;
      position: relative;
      overflow: hidden;
    }
    
    .chatbot-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 80%, rgba(74, 222, 128, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(96, 165, 250, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(192, 132, 252, 0.1) 0%, transparent 50%);
      pointer-events: none;
    }
    
    .chatbot-section h2 {
      color: #4ade80 !important;
      border-bottom: 2px solid #4ade80 !important;
      position: relative;
      z-index: 1;
    }
    
    .chatbot-container {
      max-height: 500px;
      display: flex;
      flex-direction: column;
      position: relative;
      z-index: 1;
    }
    
    .chatbot-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      backdrop-filter: blur(10px);
    }
    
    .chatbot-avatar {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, #4ade80, #22d3ee);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2em;
    }
    
    .chatbot-info h3 {
      color: #4ade80;
      margin: 0;
      font-size: 1.1em;
    }
    
    .chatbot-info p {
      color: #94a3b8;
      font-size: 0.8em;
      margin: 0;
    }
    
    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      margin-bottom: 15px;
      max-height: 300px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .message {
      margin-bottom: 15px;
      padding: 12px;
      border-radius: 15px;
      max-width: 80%;
      word-wrap: break-word;
      animation: messageSlide 0.3s ease-out;
    }
    
    @keyframes messageSlide {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .bot-message {
      background: linear-gradient(135deg, #374151, #4b5563);
      color: white;
      border-bottom-left-radius: 5px;
      align-self: flex-start;
      border: 1px solid rgba(74, 222, 128, 0.3);
    }
    
    .user-message {
      background: linear-gradient(135deg, #059669, #10b981);
      color: white;
      border-bottom-right-radius: 5px;
      align-self: flex-end;
      margin-left: auto;
    }
    
    .message-time {
      font-size: 0.7em;
      color: #94a3b8;
      text-align: right;
      margin-top: 5px;
    }
    
    .chat-input-container {
      display: flex;
      gap: 10px;
      background: rgba(255, 255, 255, 0.1);
      padding: 10px;
      border-radius: 25px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .chat-input {
      flex: 1;
      background: transparent;
      border: none;
      color: white;
      padding: 12px 15px;
      font-size: 14px;
      outline: none;
    }
    
    .chat-input::placeholder {
      color: #94a3b8;
    }
    
    .send-button {
      background: linear-gradient(135deg, #4ade80, #22d3ee);
      border: none;
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .send-button:hover {
      transform: scale(1.1);
      box-shadow: 0 0 20px rgba(74, 222, 128, 0.5);
    }
    
    .send-button:active {
      transform: scale(0.95);
    }
    
    .chat-suggestions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }
    
    .suggestion-chip {
      background: rgba(74, 222, 128, 0.2);
      color: #4ade80;
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 0.8em;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid rgba(74, 222, 128, 0.3);
    }
    
    .suggestion-chip:hover {
      background: rgba(74, 222, 128, 0.3);
      transform: translateY(-2px);
    }
    
    .typing-indicator {
      display: flex;
      align-items: center;
      gap: 5px;
      padding: 10px;
      color: #94a3b8;
      font-style: italic;
    }
    
    .typing-dots {
      display: flex;
      gap: 3px;
    }
    
    .typing-dot {
      width: 6px;
      height: 6px;
      background: #4ade80;
      border-radius: 50%;
      animation: typing 1.4s infinite ease-in-out;
    }
    
    .typing-dot:nth-child(1) { animation-delay: -0.32s; }
    .typing-dot:nth-child(2) { animation-delay: -0.16s; }
    
    @keyframes typing {
      0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
      40% { transform: scale(1); opacity: 1; }
    }
    
    /* Agri AI Auth Styles */
    .krushisanvad-section {
      background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
      padding: 25px;
      border-radius: 15px;
      margin-bottom: 20px;
      box-shadow: 0 8px 25px rgba(0,100,0,0.2);
      text-align: center;
      border: 3px solid #2e7d32;
    }
    
    .krushisanvad-logo-large {
      font-size: 3em;
      margin-bottom: 15px;
      background: linear-gradient(135deg, #2e7d32, #4caf50);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
    }
    
    .krushisanvad-title {
      color: #2e7d32;
      font-size: 1.8em;
      margin-bottom: 10px;
      font-weight: bold;
    }
    
    .krushisanvad-subtitle {
      color: #4caf50;
      margin-bottom: 25px;
      font-size: 1.1em;
    }
    
    .auth-tabs {
      display: flex;
      margin-bottom: 20px;
      border-radius: 8px;
      overflow: hidden;
      background: white;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .auth-tab {
      flex: 1;
      padding: 12px;
      text-align: center;
      background: #f8f9fa;
      border: none;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
    }
    
    .auth-tab.active {
      background: #006400;
      color: white;
    }
    
    .auth-form {
      display: none;
      max-width: 400px;
      margin: 0 auto;
    }
    
    .auth-form.active {
      display: block;
    }
    
    .user-profile {
      display: none;
      text-align: center;
      padding: 20px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      border: 2px solid #4caf50;
    }
    
    .user-profile.active {
      display: block;
      animation: slideDown 0.5s ease;
    }
    
    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .profile-info {
      margin: 15px 0;
    }
    
    .profile-actions {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .user-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, #4caf50, #2e7d32);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2em;
      margin: 0 auto 15px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    
    /* Dashboard Styles */
    .dashboard-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
      margin-top: 15px;
    }
    
    .dashboard-card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      text-align: center;
      border-left: 5px solid #4caf50;
      transition: transform 0.3s ease;
    }
    
    .dashboard-card:hover {
      transform: translateY(-5px);
    }
    
    .stat-card {
      text-align: center;
    }
    
    .stat-number {
      font-size: 2.5em;
      font-weight: bold;
      color: #006400;
      margin-bottom: 5px;
    }
    
    .stat-label {
      color: #666;
      font-size: 0.9em;
    }
    
    /* Quick Actions */
    .quick-actions {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin: 20px 0;
    }
    
    .quick-action-btn {
      padding: 15px;
      background: white;
      border: 2px solid #e8f5e8;
      border-radius: 10px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .quick-action-btn:hover {
      background: #e8f5e8;
      border-color: #4caf50;
      transform: scale(1.05);
    }
    
    .action-icon {
      font-size: 2em;
      margin-bottom: 8px;
    }
    
    /* Agri AI Community */
    .community-card {
      background: linear-gradient(135deg, #e3f2fd, #bbdefb);
      padding: 20px;
      border-radius: 12px;
      margin: 15px 0;
      border-left: 5px solid #2196f3;
    }
    
    .community-stats {
      display: flex;
      justify-content: space-around;
      margin: 15px 0;
    }
    
    .community-stat {
      text-align: center;
    }
    
    .community-number {
      font-size: 1.8em;
      font-weight: bold;
      color: #1976d2;
    }
    
    .community-label {
      color: #666;
      font-size: 0.8em;
    }
    
    /* Form Styles */
    .form-section {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 15px;
    }
    
    .input-group {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    
    .input-group label {
      font-weight: bold;
      color: #2e7d32;
      font-size: 0.9em;
    }
    
    input, select, textarea {
      padding: 12px;
      border: 2px solid #4caf50;
      border-radius: 8px;
      font-size: 16px;
      width: 100%;
      background: #f9f9f9;
    }
    
    textarea {
      height: 100px;
      resize: vertical;
    }
    
    .button-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    button {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 0.9em;
      font-weight: bold;
      cursor: pointer;
      flex: 1;
      min-width: 140px;
      transition: all 0.3s ease;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #006400, #228b22);
      color: white;
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, #ff9800, #f57c00);
      color: white;
    }
    
    .btn-info {
      background: linear-gradient(135deg, #17a2b8, #138496);
      color: white;
    }
    
    .btn-warning {
      background: linear-gradient(135deg, #ffc107, #e0a800);
      color: black;
    }
    
    .btn-success {
      background: linear-gradient(135deg, #28a745, #20c997);
      color: white;
    }
    
    .btn-krushi {
      background: linear-gradient(135deg, #2e7d32, #4caf50);
      color: white;
      border: 2px solid #1b5e20;
    }
    
    button:active {
      transform: scale(0.98);
    }
    
    /* Card Styles */
    .weather-card, .result-card, .suggestions-card, .info-card {
      background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
      padding: 15px;
      margin: 10px 0;
      border-radius: 10px;
      border-left: 5px solid #4caf50;
    }
    
    .weather-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    
    .weather-item {
      background: white;
      padding: 10px;
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 0.85em;
    }
    
    table, th, td {
      border: 1px solid #81c784;
      padding: 8px;
      text-align: center;
    }
    
    th {
      background: #4caf50;
      color: white;
      font-weight: bold;
    }
    
    td {
      background: #f9f9f9;
    }
    
    .expert-card {
      background: linear-gradient(135deg, #e3f2fd, #bbdefb);
      padding: 15px;
      margin: 10px 0;
      border-radius: 10px;
      border-left: 5px solid #2196f3;
    }
    
    .disease-image-preview {
      max-width: 100%;
      max-height: 200px;
      margin: 10px auto;
      border-radius: 10px;
      display: block;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    
    .loading {
      text-align: center;
      color: #006400;
      font-style: italic;
      padding: 20px;
    }
    
    .success {
      background: #d4edda;
      color: #155724;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      border-left: 5px solid #28a745;
    }
    
    .error {
      background: #f8d7da;
      color: #721c24;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      border-left: 5px solid #dc3545;
    }
    
    .warning {
      background: #fff3cd;
      color: #856404;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      border-left: 5px solid #ffc107;
    }
    
    .chart-container {
      position: relative;
      height: 300px;
      margin: 20px 0;
    }
    
    .graph-controls {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    .graph-btn {
      padding: 8px 15px;
      background: #f8f9fa;
      border: 2px solid #6c757d;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.8em;
    }
    
    .graph-btn.active {
      background: #006400;
      color: white;
      border-color: #006400;
    }
    
    .tips-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
      margin-top: 15px;
    }
    
    .tip-card {
      background: white;
      padding: 15px;
      border-radius: 10px;
      border-left: 4px solid #ff9800;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .crop-calendar {
      background: linear-gradient(135deg, #fff3cd, #ffeaa7);
      padding: 15px;
      border-radius: 10px;
      margin: 10px 0;
    }
    
    .calendar-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    
    .season-card {
      background: white;
      padding: 10px;
      border-radius: 8px;
      text-align: center;
    }
    
    .news-card {
      background: linear-gradient(135deg, #e3f2fd, #bbdefb);
      padding: 15px;
      margin: 10px 0;
      border-radius: 10px;
      border-left: 5px solid #2196f3;
    }
    
    .calculator-card {
      background: linear-gradient(135deg, #fff3cd, #ffeaa7);
      padding: 15px;
      border-radius: 10px;
      margin: 10px 0;
    }
    
    .calculator-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    
    .calc-result {
      background: white;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      font-weight: bold;
      margin-top: 10px;
    }
    
    .feedback-card {
      background: linear-gradient(135deg, #f8f9fa, #e9ecef);
      padding: 15px;
      border-radius: 10px;
      margin: 10px 0;
    }

    @media (min-width: 768px) {
      .container {
        max-width: 750px;
      }
      
      .form-section {
        flex-direction: row;
        flex-wrap: wrap;
      }
      
      .input-group {
        flex: 1;
        min-width: 200px;
      }
      
      .weather-grid {
        grid-template-columns: repeat(4, 1fr);
      }
      
      .tips-grid {
        grid-template-columns: 1fr 1fr;
      }
      
      .calendar-grid {
        grid-template-columns: repeat(4, 1fr);
      }
      
      .calculator-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .profile-actions {
        flex-direction: row;
      }
      
      .dashboard-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .quick-actions {
        grid-template-columns: repeat(4, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="krushisanvad-logo">ЁЯМ╛</div>
    <h1>ЁЯМ╛ рдХрд┐рд╕рд╛рди рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░ - рд╕рдВрдкреВрд░реНрдг рдХреГрд╖реА рдорд╛рд╣рд┐рддреА ЁЯМ╛</h1>
    <div class="developer">Agri AI рд╕рд┐рд╕реНрдЯреАрдо рд╕рд╣</div>
  </div>

  <div class="container">
    <!-- ЁЯФР Agri AI Login/Register Section (formerly KrushiSanvad) -->
    <div class="section krushisanvad-section">
      <div class="krushisanvad-logo-large">ЁЯМ╛</div>
      <div class="krushisanvad-title">Agri AI</div>
      <div class="krushisanvad-subtitle">рдХрд┐рд╕рд╛рдирд╛рдВрдЪреЗ рдбрд┐рдЬрд┐рдЯрд▓ рд╕рд╣рдХрд╛рд░реА</div>
      
      <!-- User Profile (shown when logged in) -->
      <div id="userProfile" class="user-profile">
        <div class="user-avatar" id="userAvatar">ЁЯСитАНЁЯМ╛</div>
        <h3 id="userGreeting">рдирдорд╕реНрдХрд╛рд░, рдХрд┐рд╕рд╛рди!</h3>
        <div class="profile-info">
          <p><strong>рдЦрд╛рддреЗ рдкреНрд░рдХрд╛рд░:</strong> <span id="userType">рдХрд┐рд╕рд╛рди</span></p>
          <p><strong>рд╕реНрдерд╛рди:</strong> <span id="userLocation">рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░</span></p>
          <p><strong>рд╕рджрд╕реНрдпрддрд╛:</strong> <span id="userMembership">рдореЛрдлрдд</span></p>
          <p><strong>рд╢реЗрддреА рдХреНрд╖реЗрддреНрд░:</strong> <span id="userFarmArea">0 рдПрдХрд░</span></p>
        </div>
        <div class="profile-actions">
          <button class="btn-krushi" onclick="krushiShowDashboard()">ЁЯУК Agri AI рдбреЕрд╢рдмреЛрд░реНрдб</button>
          <button class="btn-info" onclick="krushiEditProfile()">тЬПя╕П рдкреНрд░реЛрдлрд╛рдЗрд▓ рд╕рдВрдкрд╛рджрди</button>
          <button class="btn-secondary" onclick="krushiLogout()">ЁЯЪк рд▓реЙрдЧрдЖрдЙрдЯ</button>
        </div>
      </div>
      
      <!-- Auth Forms (shown when not logged in) -->
      <div id="authForms">
        <div class="auth-tabs">
          <button class="auth-tab active" onclick="krushiShowAuthForm('login')">рд▓реЙрдЧрд┐рди</button>
          <button class="auth-tab" onclick="krushiShowAuthForm('register')">рдиреЛрдВрджрдгреА</button>
        </div>
        
        <!-- Login Form -->
        <div id="loginForm" class="auth-form active">
          <div class="form-section">
            <div class="input-group">
              <label>рдИрдореЗрд▓ рдХрд┐рдВрд╡рд╛ рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░:</label>
              <input type="text" id="loginEmail" placeholder="рдИрдореЗрд▓ рдХрд┐рдВрд╡рд╛ рдореЛрдмрд╛рдЗрд▓">
            </div>
            <div class="input-group">
              <label>рдкрд╛рд╕рд╡рд░реНрдб:</label>
              <input type="password" id="loginPassword" placeholder="рдкрд╛рд╕рд╡рд░реНрдб">
            </div>
          </div>
          <div class="button-group">
            <button class="btn-krushi" onclick="krushiLogin()">ЁЯФР Agri AI рд▓реЙрдЧрд┐рди</button>
            <button class="btn-info" onclick="krushiForgotPassword()">ЁЯФС рдкрд╛рд╕рд╡рд░реНрдб рд╡рд┐рд╕рд░рд▓рд╛рдд?</button>
          </div>
        </div>
        
        <!-- Register Form -->
        <div id="registerForm" class="auth-form">
          <div class="form-section">
            <div class="input-group">
              <label>рдкреВрд░реНрдг рдирд╛рд╡:</label>
              <input type="text" id="regName" placeholder="рддреБрдордЪреЗ рдкреВрд░реНрдг рдирд╛рд╡">
            </div>
            <div class="input-group">
              <label>рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░:</label>
              <input type="tel" id="regMobile" placeholder="резреж рдЕрдВрдХреА рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░">
            </div>
            <div class="input-group">
              <label>рдИрдореЗрд▓:</label>
              <input type="email" id="regEmail" placeholder="рдИрдореЗрд▓">
            </div>
            <div class="input-group">
              <label>рдЬрд┐рд▓реНрд╣рд╛:</label>
              <select id="regDistrict">
                <option value="">-- рдЬрд┐рд▓реНрд╣рд╛ рдирд┐рд╡рдбрд╛ --</option>
              </select>
            </div>
            <div class="input-group">
              <label>рд╢реЗрддреА рдХреНрд╖реЗрддреНрд░ (рдПрдХрд░):</label>
              <input type="number" id="regFarmArea" placeholder="рдПрдХрд░рдордзреНрдпреЗ">
            </div>
            <div class="input-group">
              <label>рдкрд╛рд╕рд╡рд░реНрдб:</label>
              <input type="password" id="regPassword" placeholder="рдХрд┐рдорд╛рди рем рдЕрдХреНрд╖рд░реЗ">
            </div>
            <div class="input-group">
              <label>рдкрд╛рд╕рд╡рд░реНрдб рдкреБрдиреНрд╣рд╛ рдЯрд╛рдЗрдк рдХрд░рд╛:</label>
              <input type="password" id="regConfirmPassword" placeholder="рдкрд╛рд╕рд╡рд░реНрдб рдкреБрдиреНрд╣рд╛">
            </div>
          </div>
          <div class="button-group">
            <button class="btn-success" onclick="krushiRegister()">ЁЯУЭ Agri AI рд╕рджрд╕реНрдп рд╡реНрд╣рд╛</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Main App Content (Visible after login) -->
    <div id="appContent" class="app-content">
      
      <!-- ЁЯдЦ KrushiMitra Chatbot Section -->
      <div class="section chatbot-section">
        <h2>ЁЯдЦ KrushiMitra - рддреБрдордЪрд╛ рдХреГрд╖реА рд╕рд╣рд╛рдпреНрдпрдХ</h2>
        <div class="chatbot-container">
          <div class="chatbot-header">
            <div class="chatbot-avatar">ЁЯдЦ</div>
            <div class="chatbot-info">
              <h3>KrushiMitra AI</h3>
              <p>рддреБрдордЪреНрдпрд╛ рд╢реЗрддреА рд╕рдВрдмрдВрдзрд┐рдд рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рд╛</p>
            </div>
          </div>
          
          <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
              <div>рдирдорд╕реНрдХрд╛рд░! рдореА KrushiMitra, рддреБрдордЪрд╛ рдХреГрд╖реА рд╕рд╣рд╛рдпреНрдпрдХ. рдореА рддреБрдореНрд╣рд╛рд▓рд╛ рдЦрд╛рд▓реАрд▓ рдЧреЛрд╖реНрдЯреАрдВрдордзреНрдпреЗ рдорджрдд рдХрд░реВ рд╢рдХрддреЛ:</div>
              <div style="margin-top: 8px;">
                тАв ЁЯМ╛ рдкрд┐рдХрдирд┐рд╡рдб рдЖрдгрд┐ рд▓рд╛рдЧрд╡рдб<br>
                тАв ЁЯТз рд╕рд┐рдВрдЪрди рдЖрдгрд┐ рдкрд╛рдгреА рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди<br>
                тАв ЁЯРЫ рд░реЛрдЧ рдЖрдгрд┐ рдХреАрдЯрдХ рдирд┐рдпрдВрддреНрд░рдг<br>
                тАв ЁЯТ░ рдмрд╛рдЬрд╛рд░рднрд╛рд╡ рдЖрдгрд┐ рдирдлрд╛ рдЧрдгрдирд╛<br>
                тАв ЁЯПЫя╕П рд╕рд░рдХрд╛рд░реА рдпреЛрдЬрдирд╛ рдорд╛рд╣рд┐рддреА
              </div>
              <div class="message-time" id="initialTime">рдЖрдЬ, 10:00 AM</div>
            </div>
          </div>
          
          <div class="chat-suggestions">
            <div class="suggestion-chip" onclick="sendSuggestion('рд╕рдзреНрдпрд╛рдЪреЗ рдмрд╛рдЬрд╛рд░рднрд╛рд╡ рд╕рд╛рдВрдЧрд╛')">ЁЯУК рдмрд╛рдЬрд╛рд░рднрд╛рд╡</div>
            <div class="suggestion-chip" onclick="sendSuggestion('рдкрд╛рд╡рд╕рд╛рд│реНрдпрд╛рд╕рд╛рдареА рдХреЛрдгрддреА рдкрд┐рдХреЗ рдЪрд╛рдВрдЧрд▓реА?')">ЁЯМзя╕П рдкрд╛рд╡рд╕рд╛рд│реА рдкрд┐рдХреЗ</div>
            <div class="suggestion-chip" onclick="sendSuggestion('рдЬреИрд╡рд┐рдХ рд╢реЗрддреАрдмрджреНрджрд▓ рдорд╛рд╣рд┐рддреА рджреНрдпрд╛')">ЁЯМ▒ рдЬреИрд╡рд┐рдХ рд╢реЗрддреА</div>
            <div class="suggestion-chip" onclick="sendSuggestion('рд╕рд░рдХрд╛рд░реА рдпреЛрдЬрдирд╛ рдХреЛрдгрддреНрдпрд╛ рдЖрд╣реЗрдд?')">ЁЯПЫя╕П рдпреЛрдЬрдирд╛</div>
          </div>
          
          <div class="chat-input-container">
            <input type="text" class="chat-input" id="chatInput" placeholder="рддреБрдордЪрд╛ рдкреНрд░рд╢реНрди рдЯрд╛рдЗрдк рдХрд░рд╛..." onkeypress="handleChatInput(event)">
            <button class="send-button" onclick="sendMessage()">
              <span style="font-size: 1.2em;">тЖС</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Agri AI Dashboard -->
      <div class="section">
        <h2>ЁЯСитАНЁЯМ╛ Agri AI рдбреЕрд╢рдмреЛрд░реНрдб</h2>
        <div class="dashboard-grid">
          <div class="dashboard-card stat-card">
            <div class="stat-number" id="statCrops">0</div>
            <div class="stat-label">рд╕рдзреНрдпрд╛рдЪреА рдкрд┐рдХреЗ</div>
          </div>
          <div class="dashboard-card stat-card">
            <div class="stat-number" id="statProfit">тВ╣0</div>
            <div class="stat-label">рдПрдХреВрдг рдирдлрд╛</div>
          </div>
          <div class="dashboard-card stat-card">
            <div class="stat-number" id="statAlerts">0</div>
            <div class="stat-label">рд╕рдХреНрд░рд┐рдп рдЕрд▓рд░реНрдЯ</div>
          </div>
          <div class="dashboard-card stat-card">
            <div class="stat-number" id="statExperience">0</div>
            <div class="stat-label">рд╢реЗрддреА рдЕрдиреБрднрд╡ (рд╡рд░реНрд╖)</div>
          </div>
        </div>
        
        <!-- Quick Actions -->
        <div class="quick-actions">
          <div class="quick-action-btn" onclick="krushiQuickAction('weather')">
            <div class="action-icon">ЁЯМдя╕П</div>
            <div>рд╣рд╡рд╛рдорд╛рди</div>
          </div>
          <div class="quick-action-btn" onclick="krushiQuickAction('prices')">
            <div class="action-icon">ЁЯТ░</div>
            <div>рдмрд╛рдЬрд╛рд░рднрд╛рд╡</div>
          </div>
          <div class="quick-action-btn" onclick="krushiQuickAction('disease')">
            <div class="action-icon">ЁЯжа</div>
            <div>рд░реЛрдЧ рдУрд│рдЦ</div>
          </div>
          <div class="quick-action-btn" onclick="krushiQuickAction('calculator')">
            <div class="action-icon">ЁЯзо</div>
            <div>рдирдлрд╛ рдЧрдгрдирд╛</div>
          </div>
        </div>
      </div>

      <!-- Agri AI Community -->
      <div class="section">
        <h2>ЁЯСе Agri AI рд╕рдореБрджрд╛рдп</h2>
        <div class="community-card">
          <h3>ЁЯМ╛ рдХрд┐рд╕рд╛рдирд╛рдВрдЪреЗ рдбрд┐рдЬрд┐рдЯрд▓ рдкрд░рд┐рд╡рд╛рд░</h3>
          <div class="community-stats">
            <div class="community-stat">
              <div class="community-number" id="communityFarmers">1,250+</div>
              <div class="community-label">рд╕рдХреНрд░рд┐рдп рдХрд┐рд╕рд╛рди</div>
            </div>
            <div class="community-stat">
              <div class="community-number" id="communityExperts">45+</div>
              <div class="community-label">рдХреГрд╖реА рддрдЬреНрдЮ</div>
            </div>
            <div class="community-stat">
              <div class="community-number" id="communitySolutions">5,680+</div>
              <div class="community-label">рд╕рдорд╕реНрдпрд╛ рдирд┐рд░рд╛рдХрд░рдг</div>
            </div>
          </div>
          <div class="button-group">
            <button class="btn-krushi" onclick="krushiJoinCommunity()">ЁЯСе рд╕рдореБрджрд╛рдпрд╛рдд рд╕рд╛рдореАрд▓ рд╡реНрд╣рд╛</button>
            <button class="btn-info" onclick="krushiAskQuestion()">тЭУ рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рд╛</button>
          </div>
        </div>
      </div>

      <!-- ЁЯМдя╕П Weather Section -->
      <div class="section">
        <h2>ЁЯМдя╕П рд╣рд╡рд╛рдорд╛рди рдорд╛рд╣рд┐рддреА - рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░</h2>
        <div class="form-section">
          <div class="input-group">
            <label>рд╢рд╣рд░ рдирд┐рд╡рдбрд╛:</label>
            <select id="citySelect">
              <option value="">-- рд╢рд╣рд░ рдирд┐рд╡рдбрд╛ --</option>
            </select>
          </div>
          <div class="button-group">
            <button class="btn-primary" onclick="getWeather()">рд╣рд╡рд╛рдорд╛рди рдорд┐рд│рд╡рд╛</button>
            <button class="btn-info" onclick="showFarmingTips()">ЁЯзСтАНЁЯМ╛ рд╢реЗрддреА рд╕рд▓реНрд▓рд╛</button>
            <button class="btn-warning" onclick="krushiSetWeatherAlerts()">ЁЯФФ рд╣рд╡рд╛рдорд╛рди рдЕрд▓рд░реНрдЯ</button>
          </div>
        </div>
        <div id="weatherInfo" class="weather-card">
          <div class="success">рд╢рд╣рд░ рдирд┐рд╡рдбрд╛ рдЖрдгрд┐ рд╣рд╡рд╛рдорд╛рди рдорд┐рд│рд╡рд╛</div>
        </div>
        <div id="farmingTips" class="info-card" style="display: none;"></div>
      </div>

      <!-- ЁЯЫТ Crop Prices Section -->
      <div class="section">
        <h2>ЁЯЫТ рдордВрдбреА рднрд╛рд╡ - рд╕рдВрдкреВрд░реНрдг рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░</h2>
        
        <!-- Quick Price Actions -->
        <div class="quick-actions">
          <div class="quick-action-btn" onclick="quickPriceCheck()">
            <div class="action-icon">ЁЯТ░</div>
            <div>рддреНрд╡рд░рд┐рдд рднрд╛рд╡ рддрдкрд╛рд╕рд╛</div>
          </div>
          <div class="quick-action-btn" onclick="loadCropPrices()">
            <div class="action-icon">ЁЯУК</div>
            <div>рд╕рд╡рд┐рд╕реНрддрд░ рднрд╛рд╡</div>
          </div>
          <div class="quick-action-btn" onclick="showCropCalendar()">
            <div class="action-icon">ЁЯУЕ</div>
            <div>рдкреАрдХ рдХреЕрд▓реЗрдВрдбрд░</div>
          </div>
          <div class="quick-action-btn" onclick="krushiSetPriceAlerts()">
            <div class="action-icon">ЁЯФФ</div>
            <div>рднрд╛рд╡ рдЕрд▓рд░реНрдЯ</div>
          </div>
        </div>
        
        <div class="form-section">
          <div class="input-group">
            <label>рдЬрд┐рд▓реНрд╣рд╛ рдирд┐рд╡рдбрд╛:</label>
            <select id="districtSelect">
              <option value="">-- рдЬрд┐рд▓реНрд╣рд╛ рдирд┐рд╡рдбрд╛ --</option>
            </select>
          </div>
          <div class="input-group">
            <label>рдордВрдбреА рдирд┐рд╡рдбрд╛:</label>
            <select id="marketSelect">
              <option value="">-- рдордВрдбреА рдирд┐рд╡рдбрд╛ --</option>
            </select>
          </div>
          <div class="input-group">
            <label>рдкреАрдХ рдирд┐рд╡рдбрд╛:</label>
            <select id="cropSelect">
              <option value="">-- рдкреАрдХ рдирд┐рд╡рдбрд╛ --</option>
            </select>
          </div>
        </div>
        <div class="button-group">
          <button class="btn-primary" onclick="loadCropPrices()">ЁЯУК рднрд╛рд╡ рдорд┐рд│рд╡рд╛</button>
          <button class="btn-secondary" onclick="toggleAutoRefresh()" id="refreshBtn">ЁЯФД Auto Refresh</button>
          <button class="btn-info" onclick="showCropCalendar()">ЁЯУЕ рдкреАрдХ рдХреЕрд▓реЗрдВрдбрд░</button>
          <button class="btn-warning" onclick="krushiSetPriceAlerts()">ЁЯТ░ рднрд╛рд╡ рдЕрд▓рд░реНрдЯ</button>
        </div>

        <table id="dataTable">
          <thead>
            <tr>
              <th>рджрд┐рдирд╛рдВрдХ</th>
              <th>рдордВрдбреА</th>
              <th>рдкреАрдХ</th>
              <th>рдХрд┐рдВрдордд (тВ╣/рдХреНрд╡рд┐рдВрдЯрд▓)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td colspan="4">рдХреГрдкрдпрд╛ рдордВрдбреА рдЖрдгрд┐ рдкреАрдХ рдирд┐рд╡рдбрд╛</td>
            </tr>
          </tbody>
        </table>

        <!-- Graph Controls -->
        <div class="graph-controls">
          <button class="graph-btn active" onclick="changeGraphType('line')">ЁЯУИ рд▓рд╛рдЗрди рдЧреНрд░рд╛рдл</button>
          <button class="graph-btn" onclick="changeGraphType('bar')">ЁЯУК рдмрд╛рд░ рдЧреНрд░рд╛рдл</button>
          <button class="graph-btn" onclick="changeGraphType('pie')">ЁЯез рдкрд╛рдп рдЧреНрд░рд╛рдл</button>
          <button class="graph-btn" onclick="downloadGraph()">ЁЯТ╛ рдЧреНрд░рд╛рдл рдбрд╛рдЙрдирд▓реЛрдб</button>
        </div>

        <div class="chart-container">
          <canvas id="priceChart"></canvas>
        </div>

        <div id="cropCalendar" class="crop-calendar" style="display: none;"></div>
      </div>

      <!-- ЁЯжа Crop Disease Detection -->
      <div class="section">
        <h2>ЁЯжа рдкрд┐рдХрд╛рдЪреНрдпрд╛ рд░реЛрдЧрд╛рдВрдЪреА рдЕрдЪреВрдХ рдУрд│рдЦ</h2>
        <div class="form-section">
          <div class="input-group">
            <label>рдкрд┐рдХрд╛рдЪреА рдкреНрд░рддрд┐рдорд╛ рдирд┐рд╡рдбрд╛:</label>
            <input type="file" id="diseaseImage" accept="image/*" capture="camera" onchange="handleImageUpload(event)">
          </div>
          <div class="input-group">
            <label>рдкреАрдХ рдкреНрд░рдХрд╛рд░:</label>
            <select id="cropTypeSelect">
              <option value="">-- рдкреАрдХ рдирд┐рд╡рдбрд╛ --</option>
            </select>
          </div>
        </div>
        <div class="button-group">
          <button class="btn-primary" onclick="analyzeDisease()">ЁЯФН рд░реЛрдЧ рдУрд│рдЦрд╛</button>
          <button class="btn-secondary" onclick="clearImage()">тЭМ рд╕рд╛рдл рдХрд░рд╛</button>
          <button class="btn-info" onclick="showPreventionTips()">ЁЯЫбя╕П рдкреНрд░рддрд┐рдмрдВрдз рд╕рд▓реНрд▓рд╛</button>
          <button class="btn-warning" onclick="krushiSetDiseaseAlerts()">тЪая╕П рд░реЛрдЧ рдЕрд▓рд░реНрдЯ</button>
        </div>
        <div id="imagePreview"></div>
        <div id="diseaseResult" class="result-card"></div>
        <div id="diseaseSuggestions" class="suggestions-card"></div>
        <div id="preventionTips" class="info-card" style="display: none;"></div>
      </div>

      <!-- ЁЯзо Profit Calculator -->
      <div class="section">
        <h2>ЁЯзо рдирдлрд╛ рдХреЕрд▓реНрдХреНрдпреБрд▓реЗрдЯрд░</h2>
        <div class="calculator-card">
          <div class="form-section">
            <div class="input-group">
              <label>рдкреАрдХ рдирд┐рд╡рдбрд╛:</label>
              <select id="profitCropSelect">
                <option value="">-- рдкреАрдХ рдирд┐рд╡рдбрд╛ --</option>
              </select>
            </div>
            <div class="input-group">
              <label>рдХреНрд╖реЗрддреНрд░рдлрд▓ (рдПрдХрд░):</label>
              <input type="number" id="landArea" placeholder="рдПрдХрд░рдордзреНрдпреЗ">
            </div>
            <div class="input-group">
              <label>рдЕрдВрджрд╛рдЬреЗ рдЙрддреНрдкрд╛рджрди (рдХреНрд╡рд┐рдВрдЯрд▓/рдПрдХрд░):</label>
              <input type="number" id="expectedYield" placeholder="рдХреНрд╡рд┐рдВрдЯрд▓ рдкреНрд░рддрд┐ рдПрдХрд░">
            </div>
            <div class="input-group">
              <label>рдмрд╛рдЬрд╛рд░рднрд╛рд╡ (тВ╣/рдХреНрд╡рд┐рдВрдЯрд▓):</label>
              <input type="number" id="marketPrice" placeholder="рд░реБрдкрдпреЗ рдкреНрд░рддрд┐ рдХреНрд╡рд┐рдВрдЯрд▓">
            </div>
          </div>
          <div class="button-group">
            <button class="btn-warning" onclick="calculateProfit()">ЁЯзо рдирдлрд╛ рдХрд╛рдврд╛</button>
            <button class="btn-secondary" onclick="resetCalculator()">ЁЯФД рд░реАрд╕реЗрдЯ</button>
            <button class="btn-success" onclick="krushiSaveCalculation()">ЁЯТ╛ Agri AI рдордзреНрдпреЗ рд╕реЗрд╡реНрд╣ рдХрд░рд╛</button>
          </div>
          <div id="profitResult" class="calc-result" style="display: none;"></div>
        </div>
      </div>

      <!-- ЁЯУ░ Agriculture News -->
      <div class="section">
        <h2>ЁЯУ░ рдХреГрд╖реА рдмрд╛рддрдореНрдпрд╛</h2>
        <div class="news-card">
          <h3>рддрд╛рдЬреНрдпрд╛ рдХреГрд╖реА рдмрд╛рддрдореНрдпрд╛</h3>
          <div id="newsContent">
            <div class="loading">рдмрд╛рддрдореНрдпрд╛ рд▓реЛрдб рд╣реЛрдд рдЖрд╣реЗрдд...</div>
          </div>
          <div class="button-group">
            <button class="btn-info" onclick="loadNews()">ЁЯФД рдирд╡реАрди рдмрд╛рддрдореНрдпрд╛</button>
            <button class="btn-warning" onclick="krushiGetSchemes()">ЁЯПЫя╕П рд╕рд░рдХрд╛рд░реА рдпреЛрдЬрдирд╛</button>
          </div>
        </div>
      </div>

      <!-- ЁЯМ▒ Farming Information Section -->
      <div class="section">
        <h2>ЁЯМ▒ рд╢реЗрддреАрд╡рд┐рд╖рдпреА рдорд╣рддреНрд╡рд╛рдЪреА рдорд╛рд╣рд┐рддреА</h2>
        
        <div class="tips-grid">
          <div class="tip-card">
            <h3>ЁЯТз рд╕рд┐рдВрдЪрди рддрдВрддреНрд░рдЬреНрдЮрд╛рди</h3>
            <p><strong>рдбреНрд░рд┐рдк рдЗрд░рд┐рдЧреЗрд╢рди:</strong> 60% рдкрд╛рдгреА рд╡рд╛рдЪрд╡рддреЗ</p>
            <p><strong>рд╕реНрдкреНрд░рд┐рдВрдХрд▓рд░:</strong> 30-50% рдкрд╛рдгреА рд╡рд╛рдЪрд╡рддреЗ</p>
            <p><strong>рд╕рдм-рд╕рд░реНрдлреЗрд╕:</strong> рдмрд╛рд╖реНрдкреАрднрд╡рди рдХрдореА рдХрд░рддреЗ</p>
          </div>
          
          <div class="tip-card">
            <h3>ЁЯМ▒ рдЬреИрд╡рд┐рдХ рд╢реЗрддреА</h3>
            <p><strong>рдЬреИрд╡рд┐рдХ рдЦрддреЗ:</strong> рдХрдВрдкреЛрд╕реНрдЯ, рд╡рд░реНрдореАрдХрдореНрдкреЛрд╕реНрдЯ</p>
            <p><strong>рдиреИрд╕рд░реНрдЧрд┐рдХ рдХреАрдЯрдХрдирд╛рд╢рдХреЗ:</strong> рдиреАрдо, рдЧреЛрдореВрддреНрд░</p>
            <p><strong>рдлреЗрд░рдлрдЯрдХрд╛ рдкрджреНрдзрдд:</strong> рд░реЛрдЧ рдХрдореА рдХрд░рддреЗ</p>
          </div>
          
          <div class="tip-card">
            <h3>ЁЯТ░ рд╕рдмрд╕рд┐рдбреА рдпреЛрдЬрдирд╛</h3>
            <p><strong>рдкреАрдПрдо рдХрд┐рд╕рд╛рди:</strong> тВ╣6000/рд╡рд░реНрд╖</p>
            <p><strong>рдХреГрд╖реА рдЙрдзрд╛рд░:</strong> 4% рд╡реНрдпрд╛рдЬрджрд░</p>
            <p><strong>рдмрд┐рдпрд╛рдгреЗ рд╕рдмрд╕рд┐рдбреА:</strong> 50-80%</p>
          </div>
          
          <div class="tip-card">
            <h3>ЁЯУИ рдмрд╛рдЬрд╛рд░рднрд╛рд╡ рд╕реБрдзрд╛рд░рдгрд╛</h3>
            <p><strong>рдИ-NAM:</strong> рдСрдирд▓рд╛рдИрди рдмрд╛рдЬрд╛рд░</p>
            <p><strong>FPO:</strong> рдХрд┐рд╕рд╛рди рдЙрддреНрдкрд╛рджрдХ рд╕рдВрдШ</p>
            <p><strong>рдХреЙрдиреНрдЯреНрд░реЕрдХреНрдЯ рдлрд╛рд░реНрдорд┐рдВрдЧ:</strong> рдирд┐рд╢реНрдЪрд┐рдд рднрд╛рд╡</p>
          </div>
        </div>
      </div>

      <!-- ЁЯТм Feedback Section -->
      <div class="section">
        <h2>ЁЯТм рддреБрдордЪрд╛ рдЕрднрд┐рдкреНрд░рд╛рдп</h2>
        <div class="feedback-card">
          <div class="form-section">
            <div class="input-group">
              <label>рддреБрдордЪреЗ рдирд╛рд╡:</label>
              <input type="text" id="userName" placeholder="рддреБрдордЪреЗ рдирд╛рд╡">
            </div>
            <div class="input-group">
              <label>рддреБрдордЪрд╛ рдИрдореЗрд▓:</label>
              <input type="email" id="userEmail" placeholder="рдИрдореЗрд▓">
            </div>
          </div>
          <div class="input-group">
            <label>рддреБрдордЪрд╛ рдЕрднрд┐рдкреНрд░рд╛рдп:</label>
            <textarea id="userFeedback" placeholder="рддреБрдордЪреЗ рд╕реБрдЭрд╛рд╡ рдЖрдгрд┐ рдЕрднрд┐рдкреНрд░рд╛рдп..."></textarea>
          </div>
          <div class="button-group">
            <button class="btn-primary" onclick="submitFeedback()">ЁЯУи рдЕрднрд┐рдкреНрд░рд╛рдп рдкрд╛рдард╡рд╛</button>
            <button class="btn-info" onclick="krushiReportIssue()">ЁЯРЫ рд╕рдорд╕реНрдпрд╛ рдиреЛрдВрджрд╡рд╛</button>
          </div>
          <div id="feedbackMessage" style="display: none;"></div>
        </div>
      </div>

      <!-- ЁЯСитАНЁЯМ╛ Experts Section -->
      <div class="section">
        <h2>ЁЯСитАНЁЯМ╛ рдХреГрд╖реА рддрдЬреНрдЮ рд╕рдВрдкрд░реНрдХ - рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░</h2>
        <div class="expert-card">
          <strong>рдбреЙ. рд╕рдВрдЬрдп рдкрд╛рдЯреАрд▓</strong><br>
          ЁЯТ╝ рдХреГрд╖реА рддрдЬреНрдЮ, рдкреБрдгреЗ<br>
          ЁЯУЮ 9876543210<br>
          ЁЯУз drsanjay@krishi.com<br>
          ЁЯХШ рд╕рдХрд╛рд│ резреж - рд╕рдВрдзреНрдпрд╛рдХрд╛рд│ рем
        </div>
        <div class="expert-card">
          <strong>рд╢реНрд░реА. рдЕрдореЛрд▓ рджреЗрд╢рдореБрдЦ</strong><br>
          ЁЯТ╝ рдмрд╛рдЬрд╛рд░ рднрд╛рд╡ рд╕рд▓реНрд▓рд╛рдЧрд╛рд░, рдирд╛рдЧрдкреВрд░<br>
          ЁЯУЮ 9123456780<br>
          ЁЯУз amol@mandibhav.com<br>
          ЁЯХШ рд╕рдХрд╛рд│ реп - рд╕рдВрдзреНрдпрд╛рдХрд╛рд│ рел
        </div>
        <div class="expert-card">
          <strong>рдбреЙ. рдкреНрд░рд┐рдпрд╛ рд╢рд░реНрдорд╛</strong><br>
          ЁЯТ╝ рдкрд┐рдХ рд╕рдВрд░рдХреНрд╖рдг рддрдЬреНрдЮ, рдирд╛рд╢рд┐рдХ<br>
          ЁЯУЮ 9456781230<br>
          ЁЯУз drpriya@croppro.com<br>
          ЁЯХШ рд╕рдХрд╛рд│ резрез - рд╕рдВрдзреНрдпрд╛рдХрд╛рд│ рен
        </div>
        <div class="button-group" style="margin-top: 15px;">
          <button class="btn-success" onclick="krushiConnectWithExpert()">ЁЯдЭ рддрдЬреНрдЮрд╛рдВрд╢реА рд╕рдВрдкрд░реНрдХ рдХрд░рд╛</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ==================== GLOBAL VARIABLES ====================
    let currentGraphType = 'line';
    let priceChart = null;
    let refreshInterval = null;

    // ==================== AGRI AI AUTHENTICATION SYSTEM (formerly KrushiSanvad) ====================
    
    class KrushiSanvadSystem {
      constructor() {
        this.currentUser = null;
        this.isLoggedIn = false;
        this.init();
      }

      init() {
        this.checkExistingSession();
        this.populateDistricts();
        this.populateCrops();
        this.populateCities();
        this.setupEventListeners();
        this.loadNews();
        
        // Set initial time for chatbot
        document.getElementById('initialTime').textContent = new Date().toLocaleTimeString('mr-IN', { 
          hour: '2-digit', minute: '2-digit' 
        });
      }

      // ЁЯФР Core Authentication Functions
      async krushiLogin(email, password) {
        try {
          this.showLoading('Agri AI рд▓реЙрдЧрд┐рди рд╣реЛрдд рдЖрд╣реЗ...');
          
          if (!email || !password) {
            throw new Error('рдХреГрдкрдпрд╛ рдИрдореЗрд▓ рдЖрдгрд┐ рдкрд╛рд╕рд╡рд░реНрдб рднрд░рд╛');
          }

          // Simulate API call
          await new Promise(resolve => setTimeout(resolve, 1000));
          
          const users = this.getStoredUsers();
          const user = users.find(u => 
            (u.email === email || u.mobile === email) && u.password === password
          );
          
          if (user) {
            this.currentUser = user;
            this.isLoggedIn = true;
            localStorage.setItem('krushiCurrentUser', JSON.stringify(user));
            this.updateUI();
            this.showNotification('тЬЕ Agri AI рдордзреНрдпреЗ рдпрд╢рд╕реНрд╡реАрд░рд┐рддреНрдпрд╛ рд▓реЙрдЧрд┐рди рдХреЗрд▓реЗ!', 'success');
            return true;
          } else {
            // Demo user for testing
            if (email === "kisan" && password === "123456") {
              const demoUser = {
                id: 1,
                name: "рд╕AMPLE рдХрд┐рд╕рд╛рди",
                email: "kisan@example.com",
                mobile: "9876543210",
                district: "рдкреБрдгреЗ",
                farmArea: 5,
                password: "123456",
                krushiPoints: 100,
                farmingExperience: 5,
                farmDetails: [],
                communityJoined: false
              };
              this.currentUser = demoUser;
              this.isLoggedIn = true;
              localStorage.setItem('krushiCurrentUser', JSON.stringify(demoUser));
              
              // Save to users list if not exists
              const existingUsers = this.getStoredUsers();
              if (!existingUsers.find(u => u.email === demoUser.email)) {
                existingUsers.push(demoUser);
                localStorage.setItem('krushiUsers', JSON.stringify(existingUsers));
              }
              
              this.updateUI();
              this.showNotification('тЬЕ рдбреЗрдореЛ рдХрд┐рд╕рд╛рди рдореНрд╣рдгреВрди рд▓реЙрдЧрд┐рди рдХреЗрд▓реЗ!', 'success');
              return true;
            }
            throw new Error('рдЕрдпреЛрдЧреНрдп рдИрдореЗрд▓ рдХрд┐рдВрд╡рд╛ рдкрд╛рд╕рд╡рд░реНрдб');
          }
        } catch (error) {
          this.showNotification(`тЭМ ${error.message}`, 'error');
          return false;
        }
      }

      async krushiRegister(userData) {
        try {
          this.showLoading('Agri AI рдиреЛрдВрджрдгреА рд╣реЛрдд рдЖрд╣реЗ...');
          
          // Validation
          if (!userData.name || userData.name.length < 2) {
            throw new Error('рдХреГрдкрдпрд╛ рд╡реИрдз рдирд╛рд╡ рдЯрд╛рдХрд╛ (рдХрд┐рдорд╛рди реи рдЕрдХреНрд╖рд░реЗ)');
          }
          
          if (!userData.mobile || userData.mobile.length !== 10) {
            throw new Error('рдХреГрдкрдпрд╛ рд╡реИрдз резреж рдЕрдВрдХреА рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ рдЯрд╛рдХрд╛');
          }

          if (!userData.email || !userData.email.includes('@')) {
            throw new Error('рдХреГрдкрдпрд╛ рд╡реИрдз рдИрдореЗрд▓ рдЯрд╛рдХрд╛');
          }

          if (!userData.district) {
            throw new Error('рдХреГрдкрдпрд╛ рдЬрд┐рд▓реНрд╣рд╛ рдирд┐рд╡рдбрд╛');
          }

          if (userData.password.length < 6) {
            throw new Error('рдкрд╛рд╕рд╡рд░реНрдб рдХрд┐рдорд╛рди рем рдЕрдХреНрд╖рд░реЗ рдЕрд╕рд╛рд╡рд╛');
          }

          if (userData.password !== userData.confirmPassword) {
            throw new Error('рдкрд╛рд╕рд╡рд░реНрдб рдЬреБрд│рдд рдирд╛рд╣реА');
          }

          // Simulate API call
          await new Promise(resolve => setTimeout(resolve, 1500));
          
          const newUser = {
            id: Date.now(),
            ...userData,
            registrationDate: new Date().toLocaleDateString('mr-IN'),
            farmDetails: [],
            subscriptions: [],
            alerts: [],
            preferences: {},
            krushiPoints: 100,
            communityJoined: false,
            farmingExperience: Math.floor(Math.random() * 20) + 1
          };
          
          // Store user
          const users = this.getStoredUsers();
          
          // Check if user already exists
          if (users.find(u => u.email === userData.email || u.mobile === userData.mobile)) {
            throw new Error('рд╣реЗ рдИрдореЗрд▓ рдХрд┐рдВрд╡рд╛ рдореЛрдмрд╛рдЗрд▓ рдЖрдзреАрдЪ рд╡рд╛рдкрд░рд╛рдд рдЖрд╣реЗ');
          }
          
          users.push(newUser);
          localStorage.setItem('krushiUsers', JSON.stringify(users));
          
          // Auto login
          this.currentUser = newUser;
          this.isLoggedIn = true;
          localStorage.setItem('krushiCurrentUser', JSON.stringify(newUser));
          
          this.updateUI();
          this.showNotification('ЁЯОЙ Agri AI рдордзреНрдпреЗ рдпрд╢рд╕реНрд╡реАрд░рд┐рддреНрдпрд╛ рд╕рд╛рдореАрд▓ рдЭрд╛рд▓рд╛рдд! 100 KrushiPoints рдорд┐рд│рд╛рд▓реЗ!', 'success');
          return true;
          
        } catch (error) {
          this.showNotification(`тЭМ ${error.message}`, 'error');
          return false;
        }
      }

      krushiLogout() {
        this.currentUser = null;
        this.isLoggedIn = false;
        localStorage.removeItem('krushiCurrentUser');
        this.updateUI();
        this.showNotification('ЁЯЪк Agri AI рдордзреВрди рдпрд╢рд╕реНрд╡реАрд░рд┐рддреНрдпрд╛ рд▓реЙрдЧрдЖрдЙрдЯ рдХреЗрд▓реЗ', 'info');
      }

      async krushiForgotPassword() {
        const email = document.getElementById('loginEmail').value;
        if (!email) {
          this.showNotification('тЭМ рдХреГрдкрдпрд╛ рдИрдореЗрд▓ рдЯрд╛рдХрд╛', 'error');
          return;
        }
        this.showNotification(`ЁЯУз рдкрд╛рд╕рд╡рд░реНрдб рд░реАрд╕реЗрдЯ рд▓рд┐рдВрдХ ${email} рд╡рд░ рдкрд╛рдард╡рд▓рд╛ рдЧреЗрд▓рд╛`, 'info');
      }

      // ЁЯСд User Profile Functions
      async krushiUpdateProfile(profileData) {
        if (!this.isLoggedIn) return;
        
        this.currentUser = { ...this.currentUser, ...profileData };
        localStorage.setItem('krushiCurrentUser', JSON.stringify(this.currentUser));
        
        // Update in users list
        const users = this.getStoredUsers();
        const userIndex = users.findIndex(u => u.id === this.currentUser.id);
        if (userIndex !== -1) {
          users[userIndex] = this.currentUser;
          localStorage.setItem('krushiUsers', JSON.stringify(users));
        }
        
        this.updateUI();
        this.showNotification('тЬЕ рдкреНрд░реЛрдлрд╛рдЗрд▓ рдпрд╢рд╕реНрд╡реАрд░рд┐рддреНрдпрд╛ рдЕрдкрдбреЗрдЯ рдХреЗрд▓реА', 'success');
      }

      krushiGetProfile() {
        return this.currentUser;
      }

      // ЁЯМ╛ Agriculture Specific Functions
      async krushiSaveFarmDetails(farmData) {
        if (!this.isLoggedIn) return;
        
        if (!this.currentUser.farmDetails) {
          this.currentUser.farmDetails = [];
        }
        
        this.currentUser.farmDetails.push({
          id: Date.now(),
          ...farmData,
          addedDate: new Date().toLocaleDateString('mr-IN')
        });
        
        this.currentUser.krushiPoints += 50;
        
        this.krushiUpdateProfile(this.currentUser);
        this.showNotification('тЬЕ рд╢реЗрддреА рдорд╛рд╣рд┐рддреА рд╕реЗрд╡реНрд╣ рдХреЗрд▓реА +50 KrushiPoints!', 'success');
      }

      async krushiAddCropInfo(cropData) {
        if (!this.isLoggedIn) return;
        
        const farmDetails = this.currentUser.farmDetails || [];
        if (farmDetails.length === 0) {
          this.showNotification('тЪая╕П рдкреНрд░рдердо рд╢реЗрддреА рдорд╛рд╣рд┐рддреА рдЬреЛрдбрд╛', 'warning');
          return;
        }
        
        const latestFarm = farmDetails[farmDetails.length - 1];
        if (!latestFarm.crops) latestFarm.crops = [];
        
        latestFarm.crops.push({
          id: Date.now(),
          ...cropData,
          plantedDate: new Date().toLocaleDateString('mr-IN')
        });
        
        this.currentUser.krushiPoints += 25;
        
        this.krushiUpdateProfile(this.currentUser);
        this.showNotification('тЬЕ рдкреАрдХ рдорд╛рд╣рд┐рддреА рдЬреЛрдбрд▓реА +25 KrushiPoints!', 'success');
      }

      // ЁЯФФ Notification Functions
      krushiSetWeatherAlerts() {
        if (!this.isLoggedIn) {
          this.showNotification('тЪая╕П рд╣реА рд╕реБрд╡рд┐рдзрд╛ рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕рд╛рдареА Agri AI рдордзреНрдпреЗ рд▓реЙрдЧрд┐рди рдХрд░рд╛', 'warning');
          return;
        }
        
        this.currentUser.alerts = this.currentUser.alerts || [];
        this.currentUser.alerts.push({
          type: 'weather',
          active: true,
          created: new Date().toLocaleDateString('mr-IN')
        });
        
        this.krushiUpdateProfile(this.currentUser);
        this.showNotification('ЁЯМдя╕П рд╣рд╡рд╛рдорд╛рди рдЕрд▓рд░реНрдЯ рд╕рдХреНрд░рд┐рдп рдХреЗрд▓реЗ', 'success');
      }

      krushiSetPriceAlerts() {
        if (!this.isLoggedIn) {
          this.showNotification('тЪая╕П рд╣реА рд╕реБрд╡рд┐рдзрд╛ рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕рд╛рдареА Agri AI рдордзреНрдпреЗ рд▓реЙрдЧрд┐рди рдХрд░рд╛', 'warning');
          return;
        }
        
        const crop = document.getElementById('cropSelect').value;
        if (!crop) {
          this.showNotification('тЪая╕П рдкреНрд░рдердо рдкреАрдХ рдирд┐рд╡рдбрд╛', 'warning');
          return;
        }
        
        this.currentUser.alerts = this.currentUser.alerts || [];
        this.currentUser.alerts.push({
          type: 'price',
          crop: crop,
          active: true,
          created: new Date().toLocaleDateString('mr-IN')
        });
        
        this.krushiUpdateProfile(this.currentUser);
        this.showNotification(`ЁЯТ░ ${crop} рд╕рд╛рдареА рднрд╛рд╡ рдЕрд▓рд░реНрдЯ рд╕рдХреНрд░рд┐рдп рдХреЗрд▓реЗ`, 'success');
      }

      krushiSetDiseaseAlerts() {
        if (!this.isLoggedIn) {
          this.showNotification('тЪая╕П рд╣реА рд╕реБрд╡рд┐рдзрд╛ рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕рд╛рдареА Agri AI рдордзреНрдпреЗ рд▓реЙрдЧрд┐рди рдХрд░рд╛', 'warning');
          return;
        }
        
        this.currentUser.alerts = this.currentUser.alerts || [];
        this.currentUser.alerts.push({
          type: 'disease',
          active: true,
          created: new Date().toLocaleDateString('mr-IN')
        });
        
        this.krushiUpdateProfile(this.currentUser);
        this.showNotification('ЁЯжа рд░реЛрдЧ рдЕрд▓рд░реНрдЯ рд╕рдХреНрд░рд┐рдп рдХреЗрд▓реЗ', 'success');
      }

      // ЁЯУК Dashboard Functions
      krushiShowDashboard() {
        if (!this.isLoggedIn) return;
        this.updateDashboardStats();
      }

      updateDashboardStats() {
        if (!this.currentUser) return;
        
        const farmDetails = this.currentUser.farmDetails || [];
        const currentCrops = farmDetails.flatMap(farm => farm.crops || []).length;
        
        // Calculate total profit from farm details
        const totalProfit = farmDetails.reduce((sum, farm) => {
          const farmProfit = farm.crops ? farm.crops.reduce((cropSum, crop) => {
            return cropSum + (crop.estimatedProfit || 0);
          }, 0) : 0;
          return sum + farmProfit;
        }, 0);
        
        const activeAlerts = this.currentUser.alerts ? this.currentUser.alerts.length : 0;
        const experience = this.currentUser.farmingExperience || 0;
        
        document.getElementById('statCrops').textContent = currentCrops;
        document.getElementById('statProfit').textContent = `тВ╣${totalProfit}`;
        document.getElementById('statAlerts').textContent = activeAlerts;
        document.getElementById('statExperience').textContent = experience;
      }

      // ЁЯСе Community Functions
      async krushiJoinCommunity() {
        if (!this.isLoggedIn) {
          this.showNotification('тЪая╕П рд╕рдореБрджрд╛рдпрд╛рдд рд╕рд╛рдореАрд▓ рд╡реНрд╣рд╛рдпрдЪреЗ рдЕрд╕реЗрд▓ рддрд░ рдкреНрд░рдердо рд▓реЙрдЧрд┐рди рдХрд░рд╛', 'warning');
          return;
        }
        
        this.currentUser.communityJoined = true;
        this.currentUser.krushiPoints += 100;
        this.krushiUpdateProfile(this.currentUser);
        
        this.showNotification('ЁЯСе Agri AI рд╕рдореБрджрд╛рдпрд╛рдд рдпрд╢рд╕реНрд╡реАрд░рд┐рддреНрдпрд╛ рд╕рд╛рдореАрд▓ рдЭрд╛рд▓рд╛рдд! +100 KrushiPoints!', 'success');
      }

      async krushiAskQuestion() {
        if (!this.isLoggedIn) {
          this.showNotification('тЪая╕П рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рд╛рдпрдЪреЗ рдЕрд╕рд▓реНрдпрд╛рд╕ рдкреНрд░рдердо рд▓реЙрдЧрд┐рди рдХрд░рд╛', 'warning');
          return;
        }
        
        const question = prompt('рддреБрдордЪрд╛ рдХреГрд╖реА рд╕рдВрдмрдВрдзрд┐рдд рдкреНрд░рд╢реНрди рдЯрд╛рдХрд╛:');
        if (question) {
          this.currentUser.krushiPoints += 10;
          this.krushiUpdateProfile(this.currentUser);
          this.showNotification('тЭУ рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рд▓рд╛ рдЧреЗрд▓рд╛! +10 KrushiPoints', 'success');
        }
      }

      // ЁЯПЫя╕П Government Schemes
      async krushiGetSchemes() {
        this.showNotification('ЁЯПЫя╕П рд╕рд░рдХрд╛рд░реА рдпреЛрдЬрдирд╛ рдорд╛рд╣рд┐рддреА рд▓реЛрдб рд╣реЛрдд рдЖрд╣реЗ...', 'info');
        
        setTimeout(() => {
          const schemes = [
            'рдкреАрдПрдо рдХрд┐рд╕рд╛рди рд╕рдореГрджреНрдзреА рдпреЛрдЬрдирд╛ - тВ╣6000/рд╡рд░реНрд╖',
            'рд░рд╛рд╖реНрдЯреНрд░реАрдп рдХреГрд╖рд┐ рд╡рд┐рдХрд╛рд╕ рдпреЛрдЬрдирд╛ - 50% рд╕рдмрд╕рд┐рдбреА',
            'рдХрд┐рд╕рд╛рди рдХреНрд░реЗрдбрд┐рдЯ рдХрд╛рд░реНрдб - 4% рд╡реНрдпрд╛рдЬрджрд░',
            'рдореГрджрд╛ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдХрд╛рд░реНрдб - рдореЛрдлрдд рдЪрд╛рдЪрдгреА'
          ];
          
          alert(`ЁЯУЬ Agri AI рдордзреАрд▓ рдЙрдкрд▓рдмреНрдз рдпреЛрдЬрдирд╛:\n\n${schemes.join('\n')}\n\nЁЯФЧ рдЕрд░реНрдЬрд╛рд╕рд╛рдареА: https://kisan.gov.in`);
        }, 1000);
      }

      // ЁЯФз Utility Functions
      checkExistingSession() {
        const storedUser = localStorage.getItem('krushiCurrentUser');
        if (storedUser) {
          this.currentUser = JSON.parse(storedUser);
          this.isLoggedIn = true;
          this.updateUI();
        }
      }

      getStoredUsers() {
        return JSON.parse(localStorage.getItem('krushiUsers') || '[]');
      }

      populateDistricts() {
        // Replaced "рдФрд░рдВрдЧрд╛рдмрд╛рдж" with "рдЫрддреНрд░рдкрддреА рд╕рдВрднрд╛рдЬреАрдирдЧрд░"
        const districts = [
          "рдкреБрдгреЗ", "рдирд╛рдЧрдкреВрд░", "рдирд╛рд╢рд┐рдХ", "рдЫрддреНрд░рдкрддреА рд╕рдВрднрд╛рдЬреАрдирдЧрд░", "рдХреЛрд▓реНрд╣рд╛рдкреВрд░", "рд╕рд╛рдВрдЧрд▓реА", "рд╕реЛрд▓рд╛рдкреВрд░", 
          "рдЕрдорд░рд╛рд╡рддреА", "рд▓рд╛рддреВрд░", "рдзреБрд│реЗ", "рдЬрд╛рд▓рдирд╛", "рд╡рд╛рд╢рд┐рдо", "рдмреАрдб", "рдЙрд╕реНрдорд╛рдирд╛рдмрд╛рдж", "рд╕рд╛рддрд╛рд░рд╛"
        ];
        
        const select = document.getElementById('regDistrict');
        if (select) {
          districts.forEach(district => {
            const option = document.createElement('option');
            option.value = district;
            option.textContent = district;
            select.appendChild(option);
          });
        }

        const districtSelect = document.getElementById('districtSelect');
        if (districtSelect) {
          districts.forEach(district => {
            const option = document.createElement('option');
            option.value = district;
            option.textContent = district;
            districtSelect.appendChild(option);
          });
        }
      }

      populateCrops() {
        const crops = [
          "рдЧрд╣реВ", "рдЬреНрд╡рд╛рд░реА", "рдмрд╛рдЬрд░реА", "рдордХрд╛", "рддреВрд░", "рд╣рд░рднрд░рд╛", "рд╕реЛрдпрд╛рдмреАрди", "рдХрд╛рдкреВрд╕",
          "рдХрд╛рдВрджрд╛", "рдЯреЛрдореЕрдЯреЛ", "рдорд┐рд░рдЪреА", "рдмрдЯрд╛рдЯрд╛", "рд╕рд╛рдЦрд░", "рднреБрдИрдореВрдЧ", "рд╡рд╛рдВрдЧреА", "рдХрд╛рд░реНрд▓реЗ"
        ];
        
        const cropSelects = ['cropSelect', 'cropTypeSelect', 'profitCropSelect'];
        
        cropSelects.forEach(selectId => {
          const select = document.getElementById(selectId);
          if (select) {
            // Clear existing options
            select.innerHTML = '<option value="">-- рдкреАрдХ рдирд┐рд╡рдбрд╛ --</option>';
            
            crops.forEach(crop => {
              const option = document.createElement('option');
              option.value = crop;
              option.textContent = crop;
              select.appendChild(option);
            });
          }
        });
      }

      populateCities() {
        // Replaced "рдФрд░рдВрдЧрд╛рдмрд╛рдж" with "рдЫрддреНрд░рдкрддреА рд╕рдВрднрд╛рдЬреАрдирдЧрд░"
        const cities = ["рдкреБрдгреЗ", "рдирд╛рдЧрдкреВрд░", "рдирд╛рд╢рд┐рдХ", "рдЫрддреНрд░рдкрддреА рд╕рдВрднрд╛рдЬреАрдирдЧрд░", "рдХреЛрд▓реНрд╣рд╛рдкреВрд░", "рд╕реЛрд▓рд╛рдкреВрд░"];
        
        const citySelect = document.getElementById('citySelect');
        if (citySelect) {
          cities.forEach(city => {
            const option = document.createElement('option');
            option.value = city;
            option.textContent = city;
            citySelect.appendChild(option);
          });
        }
      }

      updateUI() {
        const authForms = document.getElementById('authForms');
        const userProfile = document.getElementById('userProfile');
        const appContent = document.getElementById('appContent');
        
        if (this.isLoggedIn && this.currentUser) {
          authForms.style.display = 'none';
          userProfile.classList.add('active');
          appContent.classList.add('active');
          
          document.getElementById('userGreeting').textContent = `рдирдорд╕реНрдХрд╛рд░, ${this.currentUser.name}!`;
          document.getElementById('userType').textContent = 'Agri AI рдХрд┐рд╕рд╛рди';
          document.getElementById('userLocation').textContent = this.currentUser.district || 'рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░';
          document.getElementById('userMembership').textContent = this.currentUser.krushiPoints ? `KrushiPoints: ${this.currentUser.krushiPoints}` : 'рдореЛрдлрдд';
          document.getElementById('userFarmArea').textContent = `${this.currentUser.farmArea || 0} рдПрдХрд░`;
          document.getElementById('userAvatar').textContent = 'ЁЯСитАНЁЯМ╛';
          
          this.updateDashboardStats();
          this.updateCommunityStats();
        } else {
          authForms.style.display = 'block';
          userProfile.classList.remove('active');
          appContent.classList.remove('active');
        }
      }

      updateCommunityStats() {
        document.getElementById('communityFarmers').textContent = '1,250+';
        document.getElementById('communityExperts').textContent = '45+';
        document.getElementById('communitySolutions').textContent = '5,680+';
      }

      showNotification(message, type) {
        const notification = document.createElement('div');
        notification.className = type;
        notification.innerHTML = message;
        notification.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          z-index: 1000;
          max-width: 300px;
          animation: slideIn 0.3s ease;
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.remove();
        }, 4000);
      }

      showLoading(message) {
        console.log(`Agri AI Loading: ${message}`);
      }

      setupEventListeners() {
        document.getElementById('loginPassword')?.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') krushiLogin();
        });

        document.getElementById('regConfirmPassword')?.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') krushiRegister();
        });
      }

      // Quick Actions
      krushiQuickAction(action) {
        const sections = {
          'weather': 'citySelect',
          'prices': 'districtSelect', 
          'disease': 'diseaseImage',
          'calculator': 'profitCropSelect'
        };
        
        const element = document.getElementById(sections[action]);
        if (element) {
          element.scrollIntoView({ behavior: 'smooth' });
        }
      }

      // Additional Agri AI Features
      krushiSaveCalculation() {
        if (!this.isLoggedIn) {
          this.showNotification('тЪая╕П рд╣реА рд╕реБрд╡рд┐рдзрд╛ рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕рд╛рдареА Agri AI рдордзреНрдпреЗ рд▓реЙрдЧрд┐рди рдХрд░рд╛', 'warning');
          return;
        }
        
        const profitResult = document.getElementById('profitResult');
        if (profitResult.style.display === 'none') {
          this.showNotification('тЪая╕П рдкреНрд░рдердо рдирдлрд╛ рдЧрдгрдирд╛ рдХрд░рд╛', 'warning');
          return;
        }
        
        this.showNotification('ЁЯТ╛ рдЧрдгрдирд╛ Agri AI рдордзреНрдпреЗ рд╕реЗрд╡реНрд╣ рдХреЗрд▓реА', 'success');
      }

      krushiReportIssue() {
        const issue = prompt('рддреБрдордЪреА рд╕рдорд╕реНрдпрд╛ рдХрд┐рдВрд╡рд╛ рд╕реВрдЪрдирд╛:');
        if (issue) {
          this.showNotification('ЁЯРЫ рд╕рдорд╕реНрдпрд╛ Agri AI рдордзреНрдпреЗ рдиреЛрдВрджрд╡рд▓реА рдЧреЗрд▓реА', 'success');
        }
      }

      krushiConnectWithExpert() {
        this.showNotification('ЁЯдЭ рддрдЬреНрдЮрд╛рдВрд╢реА рд╕рдВрдкрд░реНрдХ рд╕рд╛рдзрд▓рд╛ рдЬрд╛рдИрд▓', 'info');
      }

      loadNews() {
        const newsContent = document.getElementById('newsContent');
        if (!newsContent) return;
        
        const news = [
          {
            title: 'ЁЯМ╛ рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░рд╛рдд рдХрд╛рдкреВрд╕ рдЙрддреНрдкрд╛рджрди рд╡рд╛рдв',
            content: 'рдпрд╛ рд╡рд░реНрд╖реА рдХрд╛рдкреВрд╕ рдЙрддреНрдкрд╛рджрдирд╛рдд 15% рд╡рд╛рдв рдЭрд╛рд▓реНрдпрд╛рдЪреЗ рдЕрдВрджрд╛рдЬ...',
            date: new Date().toLocaleDateString('mr-IN')
          },
          {
            title: 'ЁЯТз рдирд╡реАрди рд╕рд┐рдВрдЪрди рдпреЛрдЬрдирд╛ рдЬрд╛рд╣реАрд░',
            content: 'рдХреЗрдВрджреНрд░ рд╕рд░рдХрд╛рд░рдиреЗ 5000 рдХреЛрдЯреАрдЪреА рд╕рд┐рдВрдЪрди рдпреЛрдЬрдирд╛ рдЬрд╛рд╣реАрд░ рдХреЗрд▓реА рдЖрд╣реЗ...',
            date: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toLocaleDateString('mr-IN')
          },
          {
            title: 'ЁЯЫТ рдИ-NAM рдорд╛рд░реНрдлрдд рд░реЗрдХреЙрд░реНрдб рд╡рд┐рдХреНрд░реА',
            content: 'рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░рд╛рддреАрд▓ рдХрд┐рд╕рд╛рдирд╛рдВрдиреА рдИ-NAM рдорд╛рд░реНрдлрдд 1000 рдХреЛрдЯреАрдЪреА рд╡рд┐рдХреНрд░реА рдХреЗрд▓реА...',
            date: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toLocaleDateString('mr-IN')
          }
        ];
        
        let newsHTML = '';
        news.forEach(item => {
          newsHTML += `
            <div class="tip-card" style="margin-bottom: 10px;">
              <h4>${item.title}</h4>
              <p>${item.content}</p>
              <small><strong>рддрд╛рд░реАрдЦ:</strong> ${item.date}</small>
            </div>
          `;
        });
        
        newsContent.innerHTML = newsHTML;
      }
    }

    // ==================== CHATBOT FUNCTIONALITY ====================
    
    class KrushiMitraChatbot {
      constructor() {
        this.messages = [];
        this.isTyping = false;
        this.init();
      }

      init() {
        // Initial bot message is already in HTML
      }

      addMessage(message, isUser = false) {
        const messageObj = {
          text: message,
          isUser: isUser,
          timestamp: new Date().toLocaleTimeString('mr-IN', { hour: '2-digit', minute: '2-digit' })
        };
        
        this.messages.push(messageObj);
        this.renderMessages();
        
        if (!isUser) {
          this.scrollToBottom();
        }
      }

      addBotMessage(message) {
        this.addMessage(message, false);
      }

      addUserMessage(message) {
        this.addMessage(message, true);
        
        this.showTypingIndicator();
        
        setTimeout(() => {
          this.hideTypingIndicator();
          this.generateResponse(message);
        }, 1500);
      }

      showTypingIndicator() {
        this.isTyping = true;
        this.renderMessages();
        this.scrollToBottom();
      }

      hideTypingIndicator() {
        this.isTyping = false;
        this.renderMessages();
      }

      renderMessages() {
        const chatMessages = document.getElementById('chatMessages');
        if (!chatMessages) return;
        
        chatMessages.innerHTML = '';

        this.messages.forEach(message => {
          const messageDiv = document.createElement('div');
          messageDiv.className = `message ${message.isUser ? 'user-message' : 'bot-message'}`;
          messageDiv.innerHTML = `
            <div>${message.text.replace(/\n/g, '<br>')}</div>
            <div class="message-time">${message.timestamp}</div>
          `;
          chatMessages.appendChild(messageDiv);
        });

        if (this.isTyping) {
          const typingDiv = document.createElement('div');
          typingDiv.className = 'typing-indicator';
          typingDiv.innerHTML = `
            <div>KrushiMitra рдЯрд╛рдЗрдк рдХрд░рдд рдЖрд╣реЗ</div>
            <div class="typing-dots">
              <div class="typing-dot"></div>
              <div class="typing-dot"></div>
              <div class="typing-dot"></div>
            </div>
          `;
          chatMessages.appendChild(typingDiv);
        }
      }

      scrollToBottom() {
        const chatMessages = document.getElementById('chatMessages');
        if (chatMessages) {
          setTimeout(() => {
            chatMessages.scrollTop = chatMessages.scrollHeight;
          }, 100);
        }
      }

      generateResponse(userMessage) {
        const lowerMessage = userMessage.toLowerCase();
        let response = "";

        if (lowerMessage.includes('рдирдорд╕реНрдХрд╛рд░') || lowerMessage.includes('hello') || lowerMessage.includes('hi')) {
          response = "рдирдорд╕реНрдХрд╛рд░! рдореА KrushiMitra. рддреБрдореНрд╣рд╛рд▓рд╛ рд╢реЗрддреА рд╕рдВрдмрдВрдзрд┐рдд рдХреЛрдгрддреА рдорджрдд рд╣рд╡реА рдЖрд╣реЗ?";
        }
        else if (lowerMessage.includes('рдмрд╛рдЬрд╛рд░рднрд╛рд╡') || lowerMessage.includes('рднрд╛рд╡') || lowerMessage.includes('рдХрд┐рдВрдордд')) {
          response = "ЁЯУК **рд╕рдзреНрдпрд╛рдЪреЗ рдмрд╛рдЬрд╛рд░рднрд╛рд╡ (рдЖрдЬрдЪреЗ):**\n\nтАв рдЧрд╣реВ: тВ╣2,800-3,200/рдХреНрд╡рд┐рдВрдЯрд▓\nтАв рдЬреНрд╡рд╛рд░реА: тВ╣3,200-3,800/рдХреНрд╡рд┐рдВрдЯрд▓\nтАв рд╕реЛрдпрд╛рдмреАрди: тВ╣4,500-5,200/рдХреНрд╡рд┐рдВрдЯрд▓\nтАв рдХрд╛рдкреВрд╕: тВ╣6,500-7,500/рдХреНрд╡рд┐рдВрдЯрд▓\nтАв рдХрд╛рдВрджрд╛: тВ╣1,200-1,800/рдХреНрд╡рд┐рдВрдЯрд▓\n\nЁЯФФ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рднрд╛рд╡рд╛рд╕рд╛рдареА рдордВрдбреА рдирд┐рд╡рдбрд╛ рдХрд┐рдВрд╡рд╛ рдИ-NAM рдЪреЗрдХ рдХрд░рд╛.";
        }
        else if (lowerMessage.includes('рдкрд╛рд╡рд╕рд╛рд│') || lowerMessage.includes('рдЦрд░реАрдк')) {
          response = "ЁЯМзя╕П **рдкрд╛рд╡рд╕рд╛рд│реНрдпрд╛рд╕рд╛рдареА рдпреЛрдЧреНрдп рдкрд┐рдХреЗ:**\n\nтЬЕ **рд╢рд┐рдлрд╛рд░рд╕ рдХреЗрд▓реЗрд▓реА рдкрд┐рдХреЗ:**\nтАв рднрд╛рдд (рдзрд╛рди)\nтАв рдЬреНрд╡рд╛рд░реА\nтАв рдмрд╛рдЬрд░реА\nтАв рд╕реЛрдпрд╛рдмреАрди\nтАв рдХрд╛рдкреВрд╕\nтАв рддреВрд░\nтАв рдЙрдбреАрдж\n\nЁЯТб **рд╕рд▓реНрд▓рд╛:** рдкрд╛рд╡рд╕рд╛рд│реНрдпрд╛рд╕рд╛рдареА рдбреНрд░реЗрдиреЗрдЬ рдЪрд╛рдВрдЧрд▓реЗ рдЕрд╕рд▓реЗрд▓реА рдЬрдореАрди рдирд┐рд╡рдбрд╛.";
        }
        else if (lowerMessage.includes('рдЬреИрд╡рд┐рдХ') || lowerMessage.includes('рдСрд░реНрдЧреЗрдирд┐рдХ')) {
          response = "ЁЯМ▒ **рдЬреИрд╡рд┐рдХ рд╢реЗрддреА рдорд╛рд╣рд┐рддреА:**\n\n**рдлрд╛рдпрджреЗ:**\nтАв рдкрд░реНрдпрд╛рд╡рд░рдгрд╛рд╕ рдЕрдиреБрдХреВрд▓\nтАв рджреАрд░реНрдШрдХрд╛рд│ рдЯрд┐рдХрд╛рдК\nтАв рдЙрддреНрдкрд╛рджрдирд╛рдЪреА рдЪрд╛рдВрдЧрд▓реА рдХрд┐рдВрдордд\n\n**рдЙрдкрд╛рдп:**\nтАв рдХрдВрдкреЛрд╕реНрдЯ рдЦрдд рд╡рд╛рдкрд░рд╛\nтАв рд╡рд░реНрдореАрдХрдореНрдкреЛрд╕реНрдЯ рддрдпрд╛рд░ рдХрд░рд╛\nтАв рдиреАрдо рддреЗрд▓ рдХреАрдЯрдХрдирд╛рд╢рдХ рдореНрд╣рдгреВрди рд╡рд╛рдкрд░рд╛\nтАв рдЧреЛрдореВрддреНрд░ рд╕реНрдкреНрд░реЗ рд╡рд╛рдкрд░рд╛\n\n**рд╕рд░рдХрд╛рд░реА рд╕рд╣рд╛рдпреНрдп:** 50% рд╕рдмрд╕рд┐рдбреА рдЙрдкрд▓рдмреНрдз";
        }
        else if (lowerMessage.includes('рдпреЛрдЬрдирд╛') || lowerMessage.includes('рд╕рдмрд╕рд┐рдбреА') || lowerMessage.includes('рд╕рд░рдХрд╛рд░реА')) {
          response = "ЁЯПЫя╕П **рдХреГрд╖реА рдпреЛрдЬрдирд╛:**\n\n**1. рдкреАрдПрдо рдХрд┐рд╕рд╛рди рдпреЛрдЬрдирд╛**\nтАв тВ╣6,000/рд╡рд░реНрд╖ рдкреНрд░рддреНрдпрдХреНрд╖ рд╣рд╕реНрддрд╛рдВрддрд░рдг\nтАв рд╕рд░реНрд╡ рд▓рд╣рд╛рди рдЖрдгрд┐ рд╕реАрдорд╛рдВрдд рд╢реЗрддрдХрд░реА\n\n**2. рдХрд┐рд╕рд╛рди рдХреНрд░реЗрдбрд┐рдЯ рдХрд╛рд░реНрдб**\nтАв 4% рд╡реНрдпрд╛рдЬрджрд░\nтАв рд╕рд╣рдЬ рдХрд░реНрдЬ рдЙрдкрд▓рдмреНрдзрддрд╛\n\n**3. рдкреНрд░рдзрд╛рдирдордВрддреНрд░реА рдлрд╕рд▓ рдмреАрдорд╛ рдпреЛрдЬрдирд╛**\nтАв рдиреИрд╕рд░реНрдЧрд┐рдХ рдЖрдкрддреНрддреА рд╡рд┐рд░реБрджреНрдз рд╕рдВрд░рдХреНрд╖рдг\nтАв рдкреНрд░реАрдорд┐рдпрдо: 1.5-2%\n\n**4. рдкрд░рдВрдкрд░рд╛рдЧрдд рдХреГрд╖рд┐ рд╡рд┐рдХрд╛рд╕ рдпреЛрдЬрдирд╛**\nтАв рдЬреИрд╡рд┐рдХ рд╢реЗрддреАрд╕рд╛рдареА 50% рд╕рдмрд╕рд┐рдбреА";
        }
        else if (lowerMessage.includes('рд░реЛрдЧ') || lowerMessage.includes('рдХреАрдЯрдХ') || lowerMessage.includes('рдЖрдЬрд╛рд░')) {
          response = "ЁЯжа **рд░реЛрдЧ рдЖрдгрд┐ рдХреАрдЯрдХ рдирд┐рдпрдВрддреНрд░рдг:**\n\n**рд╕рд╛рдорд╛рдиреНрдп рд╕рдорд╕реНрдпрд╛:**\nтАв рдкрд╛рдирд╛рдВрд╡рд░ рдбрд╛рдЧ\nтАв рдкрд┐рд╡рд│реЗ рдкрд╛рдиреЗ\nтАв рдХрд┐рдбреЗ рдЖрдгрд┐ рдХреАрдЯрдХ\nтАв рдореБрд│рд╛рдВрдирд╛ рддреНрд░рд╛рд╕\n\n**рдиреИрд╕рд░реНрдЧрд┐рдХ рдЙрдкрд╛рдп:**\nтАв рдиреАрдо рддреЗрд▓ рд╕реНрдкреНрд░реЗ (5%)\nтАв рдЧреЛрдореВрддреНрд░ + рддреВрдк рдХрд╛рдврд╛\nтАв рд▓рд╕рдг-рдорд┐рд░рдЪреА рд╕реНрдкреНрд░реЗ\nтАв рдорд┐рддреНрд░ рдХреАрдЯрдХ рд╡рд╛рдкрд░рд╛\n\n**рддрдЬреНрдЮ рд╕рд▓реНрд▓рд╛:** рдЬрд╡рд│рдЪреНрдпрд╛ рдХреГрд╖реА рдЕрдзрд┐рдХрд╛рд▒реНрдпрд╛рд╢реА рд╕рдВрдкрд░реНрдХ рдХрд░рд╛";
        }
        else if (lowerMessage.includes('рдкрд╛рдгреА') || lowerMessage.includes('рд╕рд┐рдВрдЪрди') || lowerMessage.includes('рдЗрд░рд┐рдЧреЗрд╢рди')) {
          response = "ЁЯТз **рд╕рд┐рдВрдЪрди рд╕рд▓реНрд▓рд╛:**\n\n**рдХрд╛рд░реНрдпрдХреНрд╖рдо рдкрджреНрдзрддреА:**\nтАв рдбреНрд░рд┐рдк рдЗрд░рд┐рдЧреЗрд╢рди (60% рдкрд╛рдгреА рдмрдЪрдд)\nтАв рд╕реНрдкреНрд░рд┐рдВрдХрд▓рд░ рд╕рд┐рд╕реНрдЯреАрдо (30-50% рдмрдЪрдд)\nтАв рд╕рдм-рд╕рд░реНрдлреЗрд╕ рдЗрд░рд┐рдЧреЗрд╢рди\n\n**рд╡реЗрд│:**\nтАв рд╕рдХрд╛рд│реА рдХрд┐рдВрд╡рд╛ рд╕рдВрдзреНрдпрд╛рдХрд╛рд│реА рдкрд╛рдгреА рджреНрдпрд╛\nтАв рдЙрдиреНрд╣рд╛рд│реНрдпрд╛рдд рдЕрдзрд┐рдХ рд╡реЗрд│рд╛ рдкрд╛рдгреА рджреНрдпрд╛\n\n**рд╕рд░рдХрд╛рд░реА рд╕рд╣рд╛рдпреНрдп:** рдбреНрд░рд┐рдк рдЗрд░рд┐рдЧреЗрд╢рдирд╕рд╛рдареА 80% рд╕рдмрд╕рд┐рдбреА";
        }
        else if (lowerMessage.includes('рдирдлрд╛') || lowerMessage.includes('рдореБрдирд╛рдлрд╛') || lowerMessage.includes('рдЙрддреНрдкрдиреНрди')) {
          response = "ЁЯТ░ **рдирдлрд╛ рд╡рд╛рдврд╡рдгреНрдпрд╛рдЪреЗ рдЙрдкрд╛рдп:**\n\n1. **рдорд┐рд╢реНрд░ рдкрд┐рдХрд╛рдХрдбреЗ рд╡рд│рд╛** - рдПрдХрд╛рдЪ рд╡реЗрд│реА рдПрдХрд╛рдкреЗрдХреНрд╖рд╛ рдЕрдзрд┐рдХ рдкрд┐рдХреЗ\n2. **рдХреЙрдиреНрдЯреНрд░реЕрдХреНрдЯ рдлрд╛рд░реНрдорд┐рдВрдЧ** - рдирд┐рд╢реНрдЪрд┐рдд рднрд╛рд╡ рдорд┐рд│рд╡рд╛\n3. **рдореВрд▓реНрдпрд╡рд░реНрдзрд┐рдд рдЙрддреНрдкрд╛рджрдиреЗ** - рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдХрд░реВрди рд╡рд┐рдХреНрд░реА\n4. **FPO рдордзреНрдпреЗ рд╕рд╛рдореАрд▓ рд╡реНрд╣рд╛** - рд╕рд╛рдореВрд╣рд┐рдХ рд╡рд┐рдХреНрд░реА\n5. **рдИ-NAM рд╡рд╛рдкрд░рд╛** - рдСрдирд▓рд╛рдИрди рдмрд╛рдЬрд╛рд░рдкреЗрда\n\nЁЯУИ рд╕рд░рд╛рд╕рд░реА рдирдлрд╛: 20-40% рдЙрддреНрдкрд╛рджрди рдЦрд░реНрдЪрд╛рд╡рд░";
        }
        else if (lowerMessage.includes('рдзрдиреНрдпрд╡рд╛рдж') || lowerMessage.includes('thanks') || lowerMessage.includes('thank you')) {
          response = "ЁЯСН рдЖрднрд╛рд░! рдЖрдгрдЦреА рдХрд╛рд╣реА рдорджрдд рд╣рд╡реА рдЕрд╕рд▓реНрдпрд╛рд╕ рдорд▓рд╛ рдХрд│рд╡рд╛. рд╢реБрднреЗрдЪреНрдЫрд╛! ЁЯМ╛";
        }
        else {
          response = "рдорд▓рд╛ рдХреНрд╖рдорд╛ рдХрд░рд╛, рдореА рддреБрдордЪрд╛ рдкреНрд░рд╢реНрди рдкреВрд░реНрдгрдкрдгреЗ рд╕рдордЬреВ рд╢рдХрд▓реЛ рдирд╛рд╣реА. рдХреГрдкрдпрд╛ рддреБрдордЪрд╛ рдкреНрд░рд╢реНрди рдкреБрдиреНрд╣рд╛ рдЯрд╛рдЗрдк рдХрд░рд╛ рдХрд┐рдВрд╡рд╛ рдЦрд╛рд▓реАрд▓рдкреИрдХреА рдПрдХ рд╡рд┐рд╖рдп рдирд┐рд╡рдбрд╛:\n\nтАв рдмрд╛рдЬрд╛рд░рднрд╛рд╡\nтАв рдкрд┐рдХрдирд┐рд╡рдб\nтАв рд░реЛрдЧ рдирд┐рдпрдВрддреНрд░рдг\nтАв рд╕рд┐рдВрдЪрди\nтАв рд╕рд░рдХрд╛рд░реА рдпреЛрдЬрдирд╛\nтАв рдирдлрд╛ рдЧрдгрдирд╛";
        }

        this.addBotMessage(response);
      }

      sendUserMessage(message) {
        if (message.trim() === '') return;
        
        this.addUserMessage(message);
        document.getElementById('chatInput').value = '';
        
        // Scroll to bottom
        this.scrollToBottom();
      }
    }

    // ==================== MAIN APPLICATION ====================

    // Initialize Systems
    const krushiSanvad = new KrushiSanvadSystem();
    const krushiMitra = new KrushiMitraChatbot();

    // Global Functions for HTML onclick
    function krushiShowAuthForm(formType) {
      document.querySelectorAll('.auth-tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.auth-form').forEach(form => form.classList.remove('active'));
      
      const tabIndex = formType === 'login' ? 1 : 2;
      const tabs = document.querySelectorAll('.auth-tab');
      if (tabs.length >= tabIndex) {
        tabs[tabIndex - 1].classList.add('active');
      }
      
      document.getElementById(`${formType}Form`).classList.add('active');
    }

    function krushiLogin() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      if (!email || !password) {
        krushiSanvad.showNotification('тЭМ рдХреГрдкрдпрд╛ рдИрдореЗрд▓ рдЖрдгрд┐ рдкрд╛рд╕рд╡рд░реНрдб рднрд░рд╛', 'error');
        return;
      }
      
      krushiSanvad.krushiLogin(email, password);
    }

    function krushiRegister() {
      const userData = {
        name: document.getElementById('regName').value,
        mobile: document.getElementById('regMobile').value,
        email: document.getElementById('regEmail').value,
        district: document.getElementById('regDistrict').value,
        farmArea: parseInt(document.getElementById('regFarmArea').value) || 0,
        password: document.getElementById('regPassword').value,
        confirmPassword: document.getElementById('regConfirmPassword').value
      };
      
      krushiSanvad.krushiRegister(userData);
    }

    function krushiLogout() {
      krushiSanvad.krushiLogout();
    }

    function krushiForgotPassword() {
      krushiSanvad.krushiForgotPassword();
    }

    function krushiShowDashboard() {
      krushiSanvad.krushiShowDashboard();
    }

    function krushiEditProfile() {
      const newName = prompt('рдирд╡реАрди рдирд╛рд╡:', krushiSanvad.currentUser?.name);
      if (newName) {
        krushiSanvad.krushiUpdateProfile({ name: newName });
      }
    }

    function krushiJoinCommunity() {
      krushiSanvad.krushiJoinCommunity();
    }

    function krushiAskQuestion() {
      krushiSanvad.krushiAskQuestion();
    }

    function krushiSetWeatherAlerts() {
      krushiSanvad.krushiSetWeatherAlerts();
    }

    function krushiSetPriceAlerts() {
      krushiSanvad.krushiSetPriceAlerts();
    }

    function krushiSetDiseaseAlerts() {
      krushiSanvad.krushiSetDiseaseAlerts();
    }

    function krushiGetSchemes() {
      krushiSanvad.krushiGetSchemes();
    }

    function krushiSaveCalculation() {
      krushiSanvad.krushiSaveCalculation();
    }

    function krushiReportIssue() {
      krushiSanvad.krushiReportIssue();
    }

    function krushiConnectWithExpert() {
      krushiSanvad.krushiConnectWithExpert();
    }

    function krushiQuickAction(action) {
      krushiSanvad.krushiQuickAction(action);
    }

    // Chatbot Functions
    function sendMessage() {
      const input = document.getElementById('chatInput');
      const message = input.value.trim();
      
      if (message) {
        krushiMitra.sendUserMessage(message);
      }
    }

    function handleChatInput(event) {
      if (event.key === 'Enter') {
        sendMessage();
      }
    }

    function sendSuggestion(suggestion) {
      document.getElementById('chatInput').value = suggestion;
      sendMessage();
    }

    // ==================== WEATHER FUNCTIONS ====================

    function getWeather() {
      const citySelect = document.getElementById('citySelect');
      if (!citySelect) {
        console.error('citySelect element not found');
        return;
      }
      
      const city = citySelect.value;
      if (!city) {
        krushiSanvad.showNotification('тЭМ рдХреГрдкрдпрд╛ рд╢рд╣рд░ рдирд┐рд╡рдбрд╛', 'error');
        return;
      }
      
      // Updated weather data with "рдЫрддреНрд░рдкрддреА рд╕рдВрднрд╛рдЬреАрдирдЧрд░"
      const weatherData = {
        "рдкреБрдгреЗ": { temp: 26, humidity: 68, wind: 8, condition: "рд╕реМрдореНрдп", rain: "20%" },
        "рдирд╛рдЧрдкреВрд░": { temp: 34, humidity: 45, wind: 6, condition: "рдЙрд╖реНрдг", rain: "5%" },
        "рдирд╛рд╢рд┐рдХ": { temp: 24, humidity: 75, wind: 12, condition: "рдердВрдб", rain: "30%" },
        "рдЫрддреНрд░рдкрддреА рд╕рдВрднрд╛рдЬреАрдирдЧрд░": { temp: 32, humidity: 52, wind: 10, condition: "рд╕реМрдореНрдп", rain: "15%" },
        "рдХреЛрд▓реНрд╣рд╛рдкреВрд░": { temp: 25, humidity: 82, wind: 15, condition: "рдврдЧрд╛рд│", rain: "45%" },
        "рд╕реЛрд▓рд╛рдкреВрд░": { temp: 36, humidity: 38, wind: 18, condition: "рдЙрд╖реНрдг", rain: "2%" }
      };
      
      const weather = weatherData[city];
      const weatherInfo = document.getElementById('weatherInfo');
      
      if (weather && weatherInfo) {
        weatherInfo.innerHTML = `
          <h3>${city} рдЪреЗ рд╣рд╡рд╛рдорд╛рди</h3>
          <div class="weather-grid">
            <div class="weather-item">
              <div>ЁЯМбя╕П рддрд╛рдкрдорд╛рди</div>
              <div><strong>${weather.temp}┬░C</strong></div>
            </div>
            <div class="weather-item">
              <div>ЁЯТз рдЖрд░реНрджреНрд░рддрд╛</div>
              <div><strong>${weather.humidity}%</strong></div>
            </div>
            <div class="weather-item">
              <div>ЁЯТи рд╡рд╛рд░рд╛</div>
              <div><strong>${weather.wind} km/h</strong></div>
            </div>
            <div class="weather-item">
              <div>ЁЯМзя╕П рдкрд╛рдКрд╕</div>
              <div><strong>${weather.rain}</strong></div>
            </div>
          </div>
          <div style="margin-top: 15px; text-align: center; font-weight: bold; color: #006400;">
            рд╕реНрдерд┐рддреА: ${weather.condition}
          </div>
          <div style="text-align: center; margin-top: 10px; font-size: 0.9em; color: #666;">
            рдЕрджреНрдпрдпрд╛рд╡рдд: ${new Date().toLocaleString('mr-IN')}
          </div>
        `;
      } else {
        weatherInfo.innerHTML = '<div class="error">рд╣рд╡рд╛рдорд╛рди рдорд╛рд╣рд┐рддреА рдЙрдкрд▓рдмреНрдз рдирд╛рд╣реА</div>';
      }
    }

    function showFarmingTips() {
      const citySelect = document.getElementById('citySelect');
      if (!citySelect) return;
      
      const city = citySelect.value;
      if (!city) {
        alert('рдХреГрдкрдпрд╛ рдкреНрд░рдердо рд╢рд╣рд░ рдирд┐рд╡рдбрд╛');
        return;
      }
      
      // Updated weather data with "рдЫрддреНрд░рдкрддреА рд╕рдВрднрд╛рдЬреАрдирдЧрд░"
      const weatherData = {
        "рдкреБрдгреЗ": "рд╕реМрдореНрдп рд╣рд╡рд╛рдорд╛рди рдЖрд╣реЗ. рд╕реЛрдпрд╛рдмреАрди, рдХрд╛рдкреВрд╕ рдХрд┐рдВрд╡рд╛ рдЬреНрд╡рд╛рд░реАрдЪреА рд▓рд╛рдЧрд╡рдб рдХрд░рд╛.",
        "рдирд╛рдЧрдкреВрд░": "рдЙрд╖реНрдг рд╣рд╡рд╛рдорд╛рди рдЖрд╣реЗ. рдХрд╛рдкреВрд╕, рд╕реЛрдпрд╛рдмреАрди рдХрд┐рдВрд╡рд╛ рддрд╛рдВрджреВрд│ рдЪрд╛рдВрдЧрд▓реЗ рдпреЗрдИрд▓.",
        "рдирд╛рд╢рд┐рдХ": "рдердВрдб рд╣рд╡рд╛рдорд╛рди рдЖрд╣реЗ. рджреНрд░рд╛рдХреНрд╖, рдХреЗрд│реА рдХрд┐рдВрд╡рд╛ рд╕рдВрддреНрд░реА рдпрд╛рд╕рд╛рдареА рдпреЛрдЧреНрдп.",
        "рдЫрддреНрд░рдкрддреА рд╕рдВрднрд╛рдЬреАрдирдЧрд░": "рд╕реМрдореНрдп рд╣рд╡рд╛рдорд╛рди рдЖрд╣реЗ. рдЬреНрд╡рд╛рд░реА, рдмрд╛рдЬрд░реА рдХрд┐рдВрд╡рд╛ рдХрд╛рдкреВрд╕ рд▓рд╛рд╡рд╛.",
        "рдХреЛрд▓реНрд╣рд╛рдкреВрд░": "рдврдЧрд╛рд│ рд╣рд╡рд╛рдорд╛рди рдЖрд╣реЗ. рднрд╛рдд, рдХрд╛рдкреВрд╕ рдХрд┐рдВрд╡рд╛ рдКрд╕ рд▓рд╛рд╡рд╛.",
        "рд╕реЛрд▓рд╛рдкреВрд░": "рдЙрд╖реНрдг рд╣рд╡рд╛рдорд╛рди рдЖрд╣реЗ. рдЬреНрд╡рд╛рд░реА, рдмрд╛рдЬрд░реА рдХрд┐рдВрд╡рд╛ рдХрд╛рдкреВрд╕ рдпреЛрдЧреНрдп."
      };
      
      const tipsDiv = document.getElementById('farmingTips');
      const tip = weatherData[city] || "рд╣рд╡рд╛рдорд╛рди рдЕрдиреБрдХреВрд▓ рдЖрд╣реЗ. рд╢реЗрддреАрдЪреА рдирд┐рдпрдорд┐рдд рдХрд╛рд│рдЬреА рдШреНрдпрд╛.";
      
      tipsDiv.innerHTML = `
        <h3>ЁЯзСтАНЁЯМ╛ ${city} рд╕рд╛рдареА рд╢реЗрддреА рд╕рд▓реНрд▓рд╛</h3>
        <p>${tip}</p>
        <p><strong>рд╕рдзреНрдпрд╛рдЪреА рд╢рд┐рдлрд╛рд░рд╕:</strong> рд╕реЛрдпрд╛рдмреАрди, рдХрд╛рдкреВрд╕ рдХрд┐рдВрд╡рд╛ рдЬреНрд╡рд╛рд░реАрдЪреА рд▓рд╛рдЧрд╡рдб рдХрд░рд╛.</p>
      `;
      tipsDiv.style.display = 'block';
    }

    // ==================== CROP PRICES FUNCTIONS ====================

    function quickPriceCheck() {
      const district = document.getElementById('districtSelect').value;
      const crop = document.getElementById('cropSelect').value;
      
      if (!district || !crop) {
        krushiSanvad.showNotification('тЭМ рдХреГрдкрдпрд╛ рдЬрд┐рд▓реНрд╣рд╛ рдЖрдгрд┐ рдкреАрдХ рдирд┐рд╡рдбрд╛', 'error');
        return;
      }
      
      // Auto-select first market
      const marketSelect = document.getElementById('marketSelect');
      if (marketSelect.options.length > 1) {
        marketSelect.selectedIndex = 1;
      }
      
      loadCropPrices();
    }

    function loadCropPrices() {
      const district = document.getElementById('districtSelect').value;
      const market = document.getElementById('marketSelect').value;
      const crop = document.getElementById('cropSelect').value;
      
      if (!district || !market || !crop) {
        krushiSanvad.showNotification('тЭМ рдХреГрдкрдпрд╛ рдЬрд┐рд▓реНрд╣рд╛, рдордВрдбреА рдЖрдгрд┐ рдкреАрдХ рдирд┐рд╡рдбрд╛', 'error');
        return;
      }
      
      // Show loading
      const tableBody = document.querySelector('#dataTable tbody');
      tableBody.innerHTML = `
        <tr>
          <td colspan="4">
            <div class="loading">
              <div>ЁЯФД рдмрд╛рдЬрд╛рд░рднрд╛рд╡ рд▓реЛрдб рд╣реЛрдд рдЖрд╣реЗрдд...</div>
              <div style="font-size: 0.8em; margin-top: 5px;">${market} рдордВрдбреА, ${crop}</div>
            </div>
          </td>
        </tr>
      `;

      // Simulate API call with realistic data
      setTimeout(() => {
        const realisticPrices = {
          "рдЧрд╣реВ": { min: 2800, max: 3200, unit: "рдХреНрд╡рд┐рдВрдЯрд▓" },
          "рдЬреНрд╡рд╛рд░реА": { min: 3200, max: 3800, unit: "рдХреНрд╡рд┐рдВрдЯрд▓" },
          "рдмрд╛рдЬрд░реА": { min: 3500, max: 4200, unit: "рдХреНрд╡рд┐рдВрдЯрд▓" },
          "рдордХрд╛": { min: 1800, max: 2200, unit: "рдХреНрд╡рд┐рдВрдЯрд▓" },
          "рддреВрд░": { min: 6500, max: 7500, unit: "рдХреНрд╡рд┐рдВрдЯрд▓" },
          "рд╣рд░рднрд░рд╛": { min: 7200, max: 8200, unit: "рдХреНрд╡рд┐рдВрдЯрд▓" },
          "рд╕реЛрдпрд╛рдмреАрди": { min: 4500, max: 5200, unit: "рдХреНрд╡рд┐рдВрдЯрд▓" },
          "рдХрд╛рдкреВрд╕": { min: 6800, max: 7800, unit: "рдХреНрд╡рд┐рдВрдЯрд▓" },
          "рдХрд╛рдВрджрд╛": { min: 1200, max: 1800, unit: "рдХреНрд╡рд┐рдВрдЯрд▓" },
          "рдЯреЛрдореЕрдЯреЛ": { min: 800, max: 1500, unit: "рдХреНрд╡рд┐рдВрдЯрд▓" },
          "рдорд┐рд░рдЪреА": { min: 8000, max: 12000, unit: "рдХреНрд╡рд┐рдВрдЯрд▓" },
          "рдмрдЯрд╛рдЯрд╛": { min: 1000, max: 1600, unit: "рдХреНрд╡рд┐рдВрдЯрд▓" },
          "рд╕рд╛рдЦрд░": { min: 3200, max: 3500, unit: "рдХреНрд╡рд┐рдВрдЯрд▓" },
          "рднреБрдИрдореВрдЧ": { min: 5500, max: 6500, unit: "рдХреНрд╡рд┐рдВрдЯрд▓" }
        };
        
        const priceData = realisticPrices[crop];
        if (!priceData) {
          tableBody.innerHTML = `
            <tr>
              <td colspan="4">
                <div class="error">
                  тЭМ ${crop} рдЪрд╛ рднрд╛рд╡ рдЙрдкрд▓рдмреНрдз рдирд╛рд╣реА
                </div>
              </td>
            </tr>
          `;
          return;
        }
        
        const randomPrice = Math.floor(Math.random() * (priceData.max - priceData.min + 1)) + priceData.min;
        const today = new Date().toLocaleDateString('mr-IN');
        
        // Generate last 5 days data
        let tableHTML = '';
        for (let i = 4; i >= 0; i--) {
          const date = new Date();
          date.setDate(date.getDate() - i);
          const dateStr = date.toLocaleDateString('mr-IN');
          
          // Slight price variation for previous days
          const dayPrice = i === 0 ? randomPrice : 
            randomPrice - Math.floor(Math.random() * 200) + 100;
          
          tableHTML += `
            <tr>
              <td>${dateStr}</td>
              <td>${market}</td>
              <td>${crop}</td>
              <td style="font-weight: bold; color: #006400;">тВ╣${dayPrice}/${priceData.unit}</td>
            </tr>
          `;
        }
        
        tableBody.innerHTML = tableHTML;
        
        // Update chart with realistic data
        updateRealisticPriceChart(crop, market, randomPrice);
        
        krushiSanvad.showNotification(`тЬЕ ${crop} рдЪреЗ рднрд╛рд╡ рдпрд╢рд╕реНрд╡реАрд░рд┐рддреНрдпрд╛ рд▓реЛрдб рдХреЗрд▓реЗ`, 'success');
        
      }, 1500);
    }

    function updateRealisticPriceChart(crop, market, currentPrice) {
      const ctx = document.getElementById('priceChart').getContext('2d');
      
      if (priceChart) {
        priceChart.destroy();
      }
      
      // Generate realistic date labels (last 7 days)
      const dates = [];
      for (let i = 6; i >= 0; i--) {
        const date = new Date();
        date.setDate(date.getDate() - i);
        dates.push(date.toLocaleDateString('mr-IN'));
      }
      
      // Generate realistic price trend
      const prices = [];
      const basePrice = currentPrice - 150;
      
      for (let i = 0; i < 7; i++) {
        const variation = Math.floor(Math.random() * 100) - 25;
        prices.push(basePrice + (i * 25) + variation);
      }
      
      const chartConfig = {
        type: currentGraphType,
        data: {
          labels: dates,
          datasets: [{
            label: `${crop} рднрд╛рд╡ - ${market} (тВ╣/рдХреНрд╡рд┐рдВрдЯрд▓)`,
            data: prices,
            borderColor: '#006400',
            backgroundColor: currentGraphType === 'line' ? 'rgba(0, 100, 0, 0.1)' : 
                             currentGraphType === 'bar' ? 'rgba(0, 100, 0, 0.7)' : 
                             ['#006400', '#228b22', '#4caf50', '#66bb6a', '#81c784', '#a5d6a7', '#c8e6c9'],
            borderWidth: currentGraphType === 'line' ? 3 : 2,
            fill: currentGraphType === 'line',
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: true,
              position: 'top',
              labels: {
                color: '#006400',
                font: {
                  size: 12
                }
              }
            },
            title: {
              display: true,
              text: `${crop} - ${market} рдордВрдбреА рднрд╛рд╡ рддрдкрд╢реАрд▓`,
              color: '#006400',
              font: {
                size: 16,
                weight: 'bold'
              }
            },
            tooltip: {
              callbacks: {
                label: function(context) {
                  return `рднрд╛рд╡: тВ╣${context.parsed.y}/рдХреНрд╡рд┐рдВрдЯрд▓`;
                }
              }
            }
          },
          scales: currentGraphType !== 'pie' ? {
            y: {
              beginAtZero: false,
              title: {
                display: true,
                text: 'рдХрд┐рдВрдордд (тВ╣)',
                color: '#006400'
              },
              ticks: {
                callback: function(value) {
                  return 'тВ╣' + value;
                }
              }
            },
            x: {
              title: {
                display: true,
                text: 'рддрд╛рд░реАрдЦ',
                color: '#006400'
              }
            }
          } : {}
        }
      };
      
      priceChart = new Chart(ctx, chartConfig);
    }

    function changeGraphType(type) {
      currentGraphType = type;
      
      // Update button states
      document.querySelectorAll('.graph-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      // Reload chart if we have data
      const crop = document.getElementById('cropSelect').value;
      const market = document.getElementById('marketSelect').value;
      
      if (crop && market) {
        // Get current price from table
        const currentPriceCell = document.querySelector('#dataTable tbody tr:last-child td:last-child');
        if (currentPriceCell) {
          const priceText = currentPriceCell.textContent;
          const priceMatch = priceText.match(/тВ╣(\d+)/);
          if (priceMatch) {
            const currentPrice = parseInt(priceMatch[1]);
            updateRealisticPriceChart(crop, market, currentPrice);
          }
        }
      }
    }

    function downloadGraph() {
      if (!priceChart) {
        alert('рдкреНрд░рдердо рдЧреНрд░рд╛рдл рддрдпрд╛рд░ рдХрд░рд╛');
        return;
      }
      
      const link = document.createElement('a');
      link.download = 'mandi-bhav-graph.png';
      link.href = priceChart.toBase64Image();
      link.click();
    }

    function toggleAutoRefresh() {
      const btn = document.getElementById('refreshBtn');
      
      if (refreshInterval) {
        clearInterval(refreshInterval);
        refreshInterval = null;
        btn.innerHTML = 'ЁЯФД Auto Refresh';
        btn.classList.remove('active');
        krushiSanvad.showNotification('тП╣я╕П рдЖрдкреЛрдЖрдк рднрд╛рд╡ рдЕрдкрдбреЗрдЯ рдерд╛рдВрдмрд╡рд▓реЗ', 'info');
      } else {
        const crop = document.getElementById('cropSelect').value;
        if (!crop) {
          krushiSanvad.showNotification('тЪая╕П рдкреНрд░рдердо рдкреАрдХ рдирд┐рд╡рдбрд╛', 'warning');
          return;
        }
        
        refreshInterval = setInterval(() => {
          loadCropPrices();
          krushiSanvad.showNotification('ЁЯФБ рднрд╛рд╡ рдЕрдкрдбреЗрдЯ рдХреЗрд▓реЗ', 'success');
        }, 15000); // 15 seconds
        
        btn.innerHTML = 'тП╣я╕П рдЕрдкрдбреЗрдЯ рдерд╛рдВрдмрд╡рд╛';
        btn.classList.add('active');
        krushiSanvad.showNotification('ЁЯФБ рдЖрдкреЛрдЖрдк рднрд╛рд╡ рдЕрдкрдбреЗрдЯ рд╕реБрд░реВ рдХреЗрд▓реЗ (рдкреНрд░рддреНрдпреЗрдХ резрел рд╕реЗрдХрдВрджрд╛рдВрдиреА)', 'success');
      }
    }

    // ==================== DISEASE DETECTION FUNCTIONS ====================

    function handleImageUpload(event) {
      const file = event.target.files[0];
      const imagePreview = document.getElementById('imagePreview');
      
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          imagePreview.innerHTML = `<img src="${e.target.result}" class="disease-image-preview" alt="Uploaded Image">`;
        };
        reader.readAsDataURL(file);
      }
    }

    function analyzeDisease() {
      const fileInput = document.getElementById('diseaseImage');
      const cropType = document.getElementById('cropTypeSelect').value;
      
      if (!fileInput.files.length || !cropType) {
        alert('рдХреГрдкрдпрд╛ рдкреНрд░рддрд┐рдорд╛ рдЖрдгрд┐ рдкреАрдХ рдкреНрд░рдХрд╛рд░ рдирд┐рд╡рдбрд╛');
        return;
      }
      
      const diseaseResult = document.getElementById('diseaseResult');
      diseaseResult.innerHTML = '<div class="loading">рдкреНрд░рддрд┐рдорд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдд рдЖрд╣реЗ... рд░реЛрдЧ рдУрд│рдЦрд▓рд╛ рдЬрд╛рдд рдЖрд╣реЗ...</div>';
      
      setTimeout(() => {
        const diseases = {
          "рдЧрд╣реВ": ["рд░рд╕реНрддрд╛ рддрдкреЗрджрд┐рдХ", "рдкрд┐рд╡рд│рд╛ рд░реЛрдЧ"],
          "рдХрд╛рдкреВрд╕": ["рдХрд╛рдкреВрд╕ рдЧрд│", "рдкрд╛рдирд╛рдВрдЪрд╛ рдХреЛрд│рд╢рд╛"],
          "рд╕реЛрдпрд╛рдмреАрди": ["рд╕реЛрдпрд╛рдмреАрди рд░рд╕реНрддрд╛", "рдкрд┐рд╡рд│рд╛ рдореЛрдЭреЗрдХ"],
          "рддреВрд░": "рд╡рд┐рд▓реНрдЯ рд░реЛрдЧ",
          "рдХрд╛рдВрджрд╛": ["рдкрд╛рдВрдврд░рд╛ рдЧрд│", "рдкрд┐рд╡рд│рд╛ рд░реЛрдЧ"],
          "рдЯреЛрдореЕрдЯреЛ": ["рдЕрд░реНрд▓реА рдмреНрд▓рд╛рдЗрдЯ", "рд▓реЗрдЯ рдмреНрд▓рд╛рдЗрдЯ"]
        };
        
        const cropDiseases = diseases[cropType] || ["рд╕рд╛рдорд╛рдиреНрдп рд░реЛрдЧ"];
        const randomDisease = Array.isArray(cropDiseases) 
          ? cropDiseases[Math.floor(Math.random() * cropDiseases.length)]
          : cropDiseases;
        
        const treatments = {
          "рд░рд╕реНрддрд╛ рддрдкреЗрджрд┐рдХ": "рдкреНрд░реЛрдкрд┐рдХреЛрдирд╛рдЭреЛрд▓ 0.1% рдЫрдЯрд╛",
          "рдкрд┐рд╡рд│рд╛ рд░реЛрдЧ": "рдорд╛рдпрдХреНрд░реЛрдиреНрдпреБрдЯреНрд░рд┐рдПрдВрдЯреНрд╕рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░рд╛",
          "рдХрд╛рдкреВрд╕ рдЧрд│": "рдлрдВрдЧреАрд╕рд╛рдпрдбреНрд╕рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░рд╛",
          "рдкрд╛рдирд╛рдВрдЪрд╛ рдХреЛрд│рд╢рд╛": "рдореЕрдиреНрдХреЛрдЭреЗрдм 0.2% рдЫрдЯрд╛",
          "рд╡рд┐рд▓реНрдЯ рд░реЛрдЧ": "рд░реЛрдЧрдкреНрд░рддрд┐рдХрд╛рд░рдХ рдЬрд╛рддреА рд╡рд╛рдкрд░рд╛",
          "рдкрд╛рдВрдврд░рд╛ рдЧрд│": "рдХрд╛рд░реНрдмреЗрдВрдбрд╛рдЭрд┐рдо 1g/рд▓реАрдЯрд░",
          "рдЕрд░реНрд▓реА рдмреНрд▓рд╛рдЗрдЯ": "рдХреНрд▓реЛрд░реЛрдереЕрд▓реЛрдирд┐рд▓ 0.2%",
          "рд▓реЗрдЯ рдмреНрд▓рд╛рдЗрдЯ": "рдореЗрдЯреЕрд▓реЕрдХреНрд╕рд┐рд▓ 0.1%"
        };
        
        diseaseResult.innerHTML = `
          <h3>тЬЕ рд░реЛрдЧ рдУрд│рдЦрд▓рд╛: ${randomDisease}</h3>
          <p><strong>рдкреАрдХ:</strong> ${cropType}</p>
          <p><strong>рдЙрдкрдЪрд╛рд░:</strong> ${treatments[randomDisease] || "рддрдЬреНрдЮ рд╕рд▓реНрд▓рд╛ рдШреНрдпрд╛"}</p>
          <p><strong>рдЖрддрд╛рдкрд░реНрдпрдВрддрдЪреЗ рдирд┐рдХрд╛рд▓:</strong> репреи% рдЕрдЪреВрдХ</p>
        `;

        showDiseaseSuggestions(randomDisease, cropType);
      }, 2000);
    }

    function showDiseaseSuggestions(disease, cropType) {
      const suggestions = {
        "рд░рд╕реНрддрд╛ рддрдкреЗрджрд┐рдХ": "рдиреАрдо рддреЗрд▓рд╛рдЪрд╛ рдлрд╡рд╛рд░рдгреА рдХрд░рд╛. рд░реЛрдЧрдЧреНрд░рд╕реНрдд рдЭрд╛рдбреЗ рдХрд╛рдвреВрди рдЯрд╛рдХрд╛.",
        "рдкрд┐рд╡рд│рд╛ рд░реЛрдЧ": "рдорд╛рдпрдХреНрд░реЛрдиреНрдпреБрдЯреНрд░рд┐рдПрдВрдЯреНрд╕рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░рд╛. рдкрд╛рдгреНрдпрд╛рдЪреЗ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдХрд░рд╛.",
        "рдХрд╛рдкреВрд╕ рдЧрд│": "рдлрдВрдЧреАрд╕рд╛рдпрдбреНрд╕рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░рд╛. рдореЛрд░рдВ рд╢реЗрддреА рдкрджреНрдзрдд рд╡рд╛рдкрд░рд╛.",
        "рд╡рд┐рд▓реНрдЯ рд░реЛрдЧ": "рд░реЛрдЧрдкреНрд░рддрд┐рдХрд╛рд░рдХ рдЬрд╛рддреА рд╡рд╛рдкрд░рд╛. рдорд╛рддреА рдЙрдкрдЪрд╛рд░ рдХрд░рд╛."
      };
      
      const suggestion = suggestions[disease] || "рддрдЬреНрдЮ рд╕рд▓реНрд▓рд╛ рдШреНрдпрд╛. рдирд┐рдпрдорд┐рдд рдирд┐рд░реАрдХреНрд╖рдг рдХрд░рд╛.";
      
      const suggestionsDiv = document.getElementById('diseaseSuggestions');
      suggestionsDiv.innerHTML = `
        <h3>ЁЯТб рдЙрдкрд╛рдп рд╕реВрдЪрдирд╛</h3>
        <p><strong>рд░реЛрдЧ:</strong> ${disease}</p>
        <p><strong>рдкреАрдХ:</strong> ${cropType}</p>
        <p><strong>рд╕реВрдЪрдирд╛:</strong> ${suggestion}</p>
        <p><strong>рддрдЬреНрдЮ рд╕рдВрдкрд░реНрдХ:</strong> ЁЯУЮ 1800-123-4567</p>
      `;
    }

    function showPreventionTips() {
      const tipsDiv = document.getElementById('preventionTips');
      tipsDiv.innerHTML = `
        <h3>ЁЯЫбя╕П рд░реЛрдЧ рдкреНрд░рддрд┐рдмрдВрдз рд╕рд▓реНрд▓рд╛</h3>
        <div class="tips-grid">
          <div class="tip-card">
            <h4>ЁЯМ▒ рдкреНрд░рддрд┐рдмрдВрдзрд╛рддреНрдордХ рдЙрдкрд╛рдп</h4>
            <ul>
              <li>рдирд┐рд░реЛрдЧреА рдмрд┐рдпрд╛рдгреЗ рд╡рд╛рдкрд░рд╛</li>
              <li>рдорд╛рддреА рдЙрдкрдЪрд╛рд░ рдХрд░рд╛</li>
              <li>рдлреЗрд░рдлрдЯрдХрд╛ рдкрджреНрдзрдд рд╡рд╛рдкрд░рд╛</li>
              <li>рд░реЛрдЧрдкреНрд░рддрд┐рд░реЛрдзрдХ рдЬрд╛рддреА рдирд┐рд╡рдбрд╛</li>
            </ul>
          </div>
          <div class="tip-card">
            <h4>ЁЯФН рдирд┐рдпрдорд┐рдд рддрдкрд╛рд╕рдгреА</h4>
            <ul>
              <li>рджрд░ рен рджрд┐рд╡рд╕рд╛рдВрдиреА рдкрд┐рдХреЗ рддрдкрд╛рд╕рд╛</li>
              <li>рдкрд╛рдиреЗ, рдЦреЛрдб, рдлреБрд▓реЗ рддрдкрд╛рд╕рд╛</li>
              <li>рдХреАрдЯрдХрд╛рдВрдЪреА рд▓рдХреНрд╖рдгреЗ рдкрд╣рд╛</li>
              <li>рдорд╛рддреАрдЪреА рдЪрд╛рдЪрдгреА рдХрд░рд╛</li>
            </ul>
          </div>
          <div class="tip-card">
            <h4>ЁЯТК рдиреИрд╕рд░реНрдЧрд┐рдХ рдЙрдкрдЪрд╛рд░</h4>
            <ul>
              <li>рдиреАрдо рддреЗрд▓ рдЫрдЯрд╛</li>
              <li>рдЧреЛрдореВрддреНрд░ рд╕реНрдкреНрд░реЗ</li>
              <li>рд▓рд╕рдг-рдорд┐рд░рдЪреА рд╕реНрдкреНрд░реЗ</li>
              <li>рддреВрдк рдХрд╛рдврд╛</li>
            </ul>
          </div>
          <div class="tip-card">
            <h4>ЁЯУЮ рдЖрдгреАрдмрд╛рдгреА рдЙрдкрд╛рдп</h4>
            <ul>
              <li>рддрдЬреНрдЮрд╛рдВрдЪрд╛ рд╕рд▓реНрд▓рд╛ рдШреНрдпрд╛</li>
              <li>рдХреГрд╖реА рдЕрдзрд┐рдХрд╛рд▒реНрдпрд╛рдВрд╢реА рд╕рдВрдкрд░реНрдХ рдХрд░рд╛</li>
              <li>рдФрд╖рдзрд╛рдВрдЪрд╛ рдпреЛрдЧреНрдп рд╡рд╛рдкрд░ рдХрд░рд╛</li>
              <li>рд╕рдВрд╕рд░реНрдЧ рдЭрд╛рд▓реЗрд▓реЗ рднрд╛рдЧ рдХрд╛рдврд╛</li>
            </ul>
          </div>
        </div>
      `;
      tipsDiv.style.display = 'block';
    }

    function clearImage() {
      document.getElementById('diseaseImage').value = '';
      document.getElementById('imagePreview').innerHTML = '';
      document.getElementById('diseaseResult').innerHTML = '';
      document.getElementById('diseaseSuggestions').innerHTML = '';
      document.getElementById('preventionTips').style.display = 'none';
    }

    // ==================== PROFIT CALCULATOR FUNCTIONS ====================

    function calculateProfit() {
      const crop = document.getElementById('profitCropSelect').value;
      const landArea = parseFloat(document.getElementById('landArea').value);
      const expectedYield = parseFloat(document.getElementById('expectedYield').value);
      const marketPrice = parseFloat(document.getElementById('marketPrice').value);
      
      if (!crop || !landArea || !expectedYield || !marketPrice) {
        alert('рдХреГрдкрдпрд╛ рд╕рд░реНрд╡ рдлреАрд▓реНрдб рднрд░рд╛');
        return;
      }
      
      const totalYield = landArea * expectedYield;
      const totalRevenue = totalYield * marketPrice;
      
      const costPerAcre = {
        "рдЧрд╣реВ": 15000, "рдЬреНрд╡рд╛рд░реА": 12000, "рдмрд╛рдЬрд░реА": 11000, "рдордХрд╛": 18000,
        "рддреВрд░": 20000, "рд╣рд░рднрд░рд╛": 18000, "рд╕реЛрдпрд╛рдмреАрди": 22000, "рдХрд╛рдкреВрд╕": 35000,
        "рдХрд╛рдВрджрд╛": 25000, "рдЯреЛрдореЕрдЯреЛ": 30000, "рдорд┐рд░рдЪреА": 40000, "рдмрдЯрд╛рдЯрд╛": 22000
      };

      const costPerAcreValue = costPerAcre[crop] || 20000;
      const totalCost = landArea * costPerAcreValue;
      const netProfit = totalRevenue - totalCost;
      const profitPercentage = ((netProfit / totalCost) * 100).toFixed(2);

      const profitResult = document.getElementById('profitResult');
      profitResult.innerHTML = `
        <h3>ЁЯзо рдирдлрд╛ рдЧрдгрдирд╛ рдирд┐рдХрд╛рд▓</h3>
        <p><strong>рдкреАрдХ:</strong> ${crop}</p>
        <p><strong>рдПрдХреВрдг рдЙрддреНрдкрд╛рджрди:</strong> ${totalYield.toFixed(2)} рдХреНрд╡рд┐рдВрдЯрд▓</p>
        <p><strong>рдПрдХреВрдг рдЙрддреНрдкрдиреНрди:</strong> тВ╣${totalRevenue.toFixed(2)}</p>
        <p><strong>рдПрдХреВрдг рдЦрд░реНрдЪ:</strong> тВ╣${totalCost.toFixed(2)}</p>
        <p><strong>рдирд┐рд╡реНрд╡рд│ рдирдлрд╛:</strong> тВ╣${netProfit.toFixed(2)}</p>
        <p><strong>рдирдлрд╛ рдЯрдХреНрдХреЗрд╡рд╛рд░реА:</strong> ${profitPercentage}%</p>
        ${netProfit > 0 ? 
          '<p style="color: green; font-weight: bold;">тЬЕ рд╣реЗ рдкреАрдХ рдлрд╛рдпрджреНрдпрд╛рдЪреЗ рдЖрд╣реЗ!</p>' : 
          '<p style="color: red; font-weight: bold;">тЪая╕П рд╣реЗ рдкреАрдХ рддреЛрдЯреНрдпрд╛рдд рдЖрд╣реЗ!</p>'
        }
      `;
      profitResult.style.display = 'block';
      
      // Save to user profile if logged in
      if (krushiSanvad.isLoggedIn) {
        const farmData = {
          crop: crop,
          landArea: landArea,
          expectedYield: expectedYield,
          marketPrice: marketPrice,
          totalRevenue: totalRevenue,
          totalCost: totalCost,
          netProfit: netProfit,
          calculatedDate: new Date().toLocaleDateString('mr-IN')
        };
        
        krushiSanvad.krushiSaveFarmDetails(farmData);
      }
    }

    function resetCalculator() {
      document.getElementById('profitCropSelect').value = '';
      document.getElementById('landArea').value = '';
      document.getElementById('expectedYield').value = '';
      document.getElementById('marketPrice').value = '';
      document.getElementById('profitResult').style.display = 'none';
    }

    function showCropCalendar() {
      const calendarDiv = document.getElementById('cropCalendar');
      calendarDiv.innerHTML = `
        <h3>ЁЯУЕ рдкреАрдХ рдХреЕрд▓реЗрдВрдбрд░ - рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░</h3>
        <div class="calendar-grid">
          <div class="season-card">
            <h4>ЁЯМ▒ рдЦрд░реАрдк (рдЬреВрди-рдСрдХреНрдЯреЛрдмрд░)</h4>
            <p><strong>рдкрд┐рдХреЗ:</strong> рдзрд╛рди, рдЬреНрд╡рд╛рд░реА, рдмрд╛рдЬрд░реА, рдХрд╛рдкреВрд╕, рд╕реЛрдпрд╛рдмреАрди</p>
            <p><strong>рд╕рд▓реНрд▓рд╛:</strong> рдкрд╛рд╡рд╕рд╛рд│реНрдпрд╛рд╕рд╛рдареА рдпреЛрдЧреНрдп, рдкреБрд░реЗрд╢рд╛ рдкрд╛рдгреНрдпрд╛рдЪреА рд╡реНрдпрд╡рд╕реНрдерд╛ рдХрд░рд╛</p>
          </div>
          <div class="season-card">
            <h4>ЁЯМ╛ рд░рдмреА (рдиреЛрд╡реНрд╣реЗрдВрдмрд░-рдорд╛рд░реНрдЪ)</h4>
            <p><strong>рдкрд┐рдХреЗ:</strong> рдЧрд╣реВ, рдЬреНрд╡рд╛рд░реА, рд╣рд░рднрд░рд╛, рднреБрдИрдореВрдЧ, рдХрд╛рдВрджрд╛</p>
            <p><strong>рд╕рд▓реНрд▓рд╛:</strong> рдердВрдб рд╣рд╡рд╛рдорд╛рдирд╛рдд рд╡рд╛рдврдгрд╛рд░реА рдкрд┐рдХреЗ, рдХрдореА рдкрд╛рдгреА рд▓рд╛рдЧрддреЗ</p>
          </div>
          <div class="season-card">
            <h4>тШАя╕П рдЙрдиреНрд╣рд╛рд│реА (рдПрдкреНрд░рд┐рд▓-рдЬреВрди)</h4>
            <p><strong>рдкрд┐рдХреЗ:</strong> рдмрдЯрд╛рдЯрд╛, рдХрд╛рдВрджрд╛, рднреЗрдВрдбреА, рдорд┐рд░рдЪреА, рдХрд╛рдХрдбреА</p>
            <p><strong>рд╕рд▓реНрд▓рд╛:</strong> рдЙрдиреНрд╣рд╛рд│реНрдпрд╛рддреАрд▓ рдкрд┐рдХреЗ, рд╕рд┐рдВрдЪрдирд╛рд╡рд░ рдЕрд╡рд▓рдВрдмреВрди</p>
          </div>
          <div class="season-card">
            <h4>ЁЯНО рдмрд╛рдЧрд╛рдпрддреА (рд╕рдВрдкреВрд░реНрдг рд╡рд░реНрд╖)</h4>
            <p><strong>рдкрд┐рдХреЗ:</strong> рджреНрд░рд╛рдХреНрд╖, рдХреЗрд│реА, рд╕рдВрддреНрд░рд╛, рдЖрдВрдмрд╛, рдирд╛рд░рд│</p>
            <p><strong>рд╕рд▓реНрд▓рд╛:</strong> рджреАрд░реНрдШрдХрд╛рд▓реАрди рдЧреБрдВрддрд╡рдгреВрдХ, рд╕рддрдд рдХрд╛рд│рдЬреА рдЖрд╡рд╢реНрдпрдХ</p>
          </div>
        </div>
      `;
      calendarDiv.style.display = 'block';
    }

    // ==================== FEEDBACK FUNCTION ====================

    function submitFeedback() {
      const name = document.getElementById('userName').value;
      const email = document.getElementById('userEmail').value;
      const feedback = document.getElementById('userFeedback').value;
      
      if (!name || !email || !feedback) {
        alert('рдХреГрдкрдпрд╛ рд╕рд░реНрд╡ рдлреАрд▓реНрдб рднрд░рд╛');
        return;
      }
      
      const feedbackMessage = document.getElementById('feedbackMessage');
      feedbackMessage.innerHTML = `
        <div class="success">
          <h3>тЬЕ рдЕрднрд┐рдкреНрд░рд╛рдп рдкрд╛рдард╡рд▓рд╛ рдЧреЗрд▓рд╛!</h3>
          <p>рдзрдиреНрдпрд╡рд╛рдж ${name}, рддреБрдордЪрд╛ рдЕрднрд┐рдкреНрд░рд╛рдп рдЖрдореНрд╣рд╛рд▓рд╛ рдорд┐рд│рд╛рд▓рд╛ рдЖрд╣реЗ.</p>
          <p>рдЖрдореНрд╣реА рд▓рд╡рдХрд░рдЪ рддреБрдордЪреНрдпрд╛рд╢реА рд╕рдВрдкрд░реНрдХ рд╕рд╛рдзреВ.</p>
        </div>
      `;
      feedbackMessage.style.display = 'block';
      
      document.getElementById('userName').value = '';
      document.getElementById('userEmail').value = '';
      document.getElementById('userFeedback').value = '';
      
      setTimeout(() => {
        feedbackMessage.style.display = 'none';
      }, 5000);
    }

    // ==================== MARKET POPULATION ====================

    document.getElementById('districtSelect').addEventListener('change', function() {
      const district = this.value;
      const marketSelect = document.getElementById('marketSelect');
      
      if (!marketSelect) return;
      
      marketSelect.innerHTML = '<option value="">-- рдордВрдбреА рдирд┐рд╡рдбрд╛ --</option>';
      
      if (district) {
        // Updated markets with "рдЫрддреНрд░рдкрддреА рд╕рдВрднрд╛рдЬреАрдирдЧрд░" instead of "рдФрд░рдВрдЧрд╛рдмрд╛рдж"
        const markets = {
          "рдкреБрдгреЗ": ["рдкреБрдгреЗ рдПрдкреАрдПрдорд╕реА", "рдмрд╛рд░рд╛рдорддреА рдордВрдбреА", "рд╢рд┐рд░реВрд░ рдордВрдбреА", "рдЬреБрдиреНрдирд░ рдордВрдбреА", "рднреЛрд░ рдордВрдбреА"],
          "рдирд╛рдЧрдкреВрд░": ["рдирд╛рдЧрдкреВрд░ рдПрдкреАрдПрдорд╕реА", "рдХрд╛рдордареА рдордВрдбреА", "рдЙрдорд░реЗрдб рдордВрдбреА", "рдХрд╛рдЯреЛрд▓ рдордВрдбреА", "рдирд░рдЦреЗрдб рдордВрдбреА"],
          "рдирд╛рд╢рд┐рдХ": ["рдирд╛рд╢рд┐рдХ рдПрдкреАрдПрдорд╕реА", "рдорд╛рд▓реЗрдЧрд╛рд╡ рдордВрдбреА", "рдЗрдЧрддрдкреБрд░реА рдордВрдбреА", "рд╕рд┐рдиреНрдирд░ рдордВрдбреА", "рдпреЗрд╡рд▓рд╛ рдордВрдбреА"],
          "рдЫрддреНрд░рдкрддреА рд╕рдВрднрд╛рдЬреАрдирдЧрд░": ["рдЫрддреНрд░рдкрддреА рд╕рдВрднрд╛рдЬреАрдирдЧрд░ рдПрдкреАрдПрдорд╕реА", "рдЬрд╛рд▓рдирд╛ рдордВрдбреА", "рд╡реИрдЬрд╛рдкреВрд░ рдордВрдбреА", "рдЧрдВрдЧрд╛рдкреВрд░ рдордВрдбреА", "рд╕рд┐рд▓реНрд▓реЛрдб рдордВрдбреА"],
          "рдХреЛрд▓реНрд╣рд╛рдкреВрд░": ["рдХреЛрд▓реНрд╣рд╛рдкреВрд░ рдПрдкреАрдПрдорд╕реА", "рдЗрдЪрд▓рдХрд░рдВрдЬреА рдордВрдбреА", "рдЧрдбрд╣рд┐рдВрдЧреНрд▓рдЬ рдордВрдбреА", "рдХрд╛рдЧрд▓ рдордВрдбреА", "рд╢рд┐рд░реЛрд│ рдордВрдбреА"],
          "рд╕реЛрд▓рд╛рдкреВрд░": ["рд╕реЛрд▓рд╛рдкреВрд░ рдПрдкреАрдПрдорд╕реА", "рдмрд╛рд░реНрд╢реА рдордВрдбреА", "рдореЛрд╣реЛрд│ рдордВрдбреА", "рдкрдВрдврд░рдкреВрд░ рдордВрдбреА", "рдордВрдЧрд│рд╡реЗрдврд╛ рдордВрдбреА"],
          "рдЕрдорд░рд╛рд╡рддреА": ["рдЕрдорд░рд╛рд╡рддреА рдПрдкреАрдПрдорд╕реА", "рдЪрд╛рдВрджреВрд░ рдордВрдбреА", "рдзрд╛рд░рдгреА рдордВрдбреА", "рдЕрдЪрд▓рдкреВрд░ рдордВрдбреА", "рд╡рд░реБрдб рдордВрдбреА"],
          "рд▓рд╛рддреВрд░": ["рд▓рд╛рддреВрд░ рдПрдкреАрдПрдорд╕реА", "рдЙрджрдЧреАрд░ рдордВрдбреА", "рдирд┐рд▓рдВрдЧрд╛ рдордВрдбреА", "рдЕрд╣рдорджрдкреВрд░ рдордВрдбреА", "рдФрд╕рд╛ рдордВрдбреА"]
        };
        
        const districtMarkets = markets[district] || [district + " рдореБрдЦреНрдп рдордВрдбреА"];
        districtMarkets.forEach(market => {
          const option = document.createElement('option');
          option.value = market;
          option.textContent = market;
          marketSelect.appendChild(option);
        });
        
        krushiSanvad.showNotification(`ЁЯПк ${districtMarkets.length} рдордВрдбреНрдпрд╛ рдЙрдкрд▓рдмреНрдз`, 'info');
      }
    });

    // ==================== INITIALIZE APP ====================

    window.addEventListener('load', function() {
      console.log("тЬЕ Agri AI App Loaded Successfully!");
      console.log("Demo Login: Email: kisan, Password: 123456");
    });

  </script>
</body>
</html>